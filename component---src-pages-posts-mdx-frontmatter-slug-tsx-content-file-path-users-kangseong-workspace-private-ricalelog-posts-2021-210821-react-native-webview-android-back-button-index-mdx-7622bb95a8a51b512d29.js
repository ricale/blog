"use strict";(self.webpackChunkricalelog=self.webpackChunkricalelog||[]).push([[4316],{4807:function(n,a,s){s.r(a),s.d(a,{Head:function(){return j},default:function(){return C}});var t=s(1151),e=s(7294);function p(n){const a=Object.assign({p:"p",h2:"h2",code:"code",a:"a",div:"div",h3:"h3",h4:"h4",ul:"ul",li:"li"},(0,t.ah)(),n.components);return e.createElement(e.Fragment,null,e.createElement(a.p,null,"React Native 를 웹뷰 컨테이너로 사용해 웹앱을 구현하고 있다."),"\n",e.createElement(a.p,null,"웹뷰를 사용한 하이브리드앱 구현 시 주의해야 할 점 중 하나는 안드로이드 기기의 백버튼(뒤로가기 버튼)에 대한 처리다. 사람들은 이전 웹페이지로 돌아가길 기대하며 백버튼을 누르지만, React Native 는 웹뷰 내에서의 이전 페이지로 이동하는 것이 아니라 React Native 상의 이전 화면으로 돌아가기 때문이다."),"\n",e.createElement(a.p,null,"만약 웹뷰 화면이 해당 앱의 첫 화면이라면, 백버튼을 눌렀을 때 이전 웹페이지로 가는 것이 아니라 앱이 종료되는 것을 경험할 수 있다. 당연하게도 그것은 개발자가 의도한 사항도, 사용자가 의도한 사항도 아니다."),"\n",e.createElement(a.p,null,"그러면 웹뷰가 있는 화면에서 백버튼을 눌렀을 때 React Native 의 이전 화면이 아닌 웹뷰의 이전 웹페이지가로 가도록 코드를 수정해보자."),"\n",e.createElement(a.h2,null,"1. ",e.createElement(a.code,null,"onNavigationStateChange")),"\n",e.createElement(a.p,null,"React Native WebView 를 사용하고 있다면 ",e.createElement(a.a,{href:"https://github.com/react-native-webview/react-native-webview/blob/master/docs/Reference.md#onnavigationstatechange"},e.createElement(a.code,null,"onNavigationStateChange")," 콜백"),"과 ",e.createElement(a.a,{href:"https://reactnative.dev/docs/backhandler"},e.createElement(a.code,null,"BackHandler")," API"),"를 사용해 이전 웹페이지로 이동하도록 백버튼의 기능을 조정할 수 있다."),"\n",e.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">HomeScreen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>navState<span class="token punctuation">,</span> setNavState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token function-variable function">onPress</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>navState<span class="token punctuation">.</span>canGoBack<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// 뒤로 갈 수 있는 상태라면 이전 웹페이지로 이동한다</span>\n        ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">// 기본 뒤로가기 동작을 수행하지 않을 거라면 true 를 리턴한다.</span>\n        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token comment">// 뒤로 갈 수 없는 상태라면</span>\n        <span class="token comment">// 다른 원하는 행동을 하면 된다</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"do something"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">// 기본 뒤로가기 동작을 수행하지 않을 거라면 true 가 아닌 값을 리턴한다.</span>\n        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 안드로이드 백버튼이 눌렸을 때 이벤트 리스너를 등록한다.</span>\n    BackHandler<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"hardwareBackPress"</span><span class="token punctuation">,</span> onPress<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      BackHandler<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"hardwareBackPress"</span><span class="token punctuation">,</span> onPress<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>navState<span class="token punctuation">.</span>canGoBack<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>WebView\n      <span class="token comment">// ...</span>\n      ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span>\n      <span class="token comment">// 웹뷰의</span>\n      onNavigationStateChange<span class="token operator">=</span><span class="token punctuation">{</span>setNavState<span class="token punctuation">}</span>\n    <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,e.createElement(a.code,null,"onNavigationStateChange")," 콜백의 첫 번째 인자(",e.createElement(a.code,null,"navState"),")는 웹뷰의 현재 상태가 담긴 객체인데, 해당 객체의 ",e.createElement(a.code,null,"canGoBack")," 값은 현재 웹뷰에서 뒤로가기가 가능한 상태인지를 알려준다 (예를 들어 첫페이지에서는 뒤로 갈 수 없을 것이다. 그런 경우에는 ",e.createElement(a.code,null,"false")," 값을 가진다)."),"\n",e.createElement(a.p,null,"뒤로 갈 수 있다면 ",e.createElement(a.code,null,"ref.current.goBack()"),"메서드를 사용해 이전 페이지로 돌아가고, 그렇지 않다면 필요한 다른 작업을 하면 되겠다."),"\n",e.createElement(a.h2,null,"2. HTML5 History API 대응"),"\n",e.createElement(a.p,null,"하지만 ",e.createElement(a.code,null,"onNavigationStateChange")," 콜백에 문제가 있으니, 바로 ",e.createElement(a.code,null,"pushState()"),", ",e.createElement(a.code,null,"replaceState()")," 등 ",e.createElement(a.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/History_API"},"HTML5 History API"),"로 추가된 기능으로 페이지 이동을 하면 동작하지 않는다는 것이다. 이는 ",e.createElement(a.code,null,"canGoBack")," 값이 최신화되지 않는다는 뜻이고, 위에서 작성한 코드가 정상적으로 동작할 수 없다는 뜻이다."),"\n",e.createElement(a.p,null,"물론 여기서 주저앉을 수는 없다. 이제 우리는 ",e.createElement(a.a,{href:"https://github.com/react-native-webview/react-native-webview/blob/master/docs/Reference.md#onmessage"},e.createElement(a.code,null,"onMessage")," 콜백"),"과 ",e.createElement(a.a,{href:"https://github.com/react-native-webview/react-native-webview/blob/master/docs/Reference.md#injectjavascriptstr"},e.createElement(a.code,null,"webview.injectJavaScript()")," 메서드"),"를 통해 ",e.createElement(a.code,null,"pushState()"),", ",e.createElement(a.code,null,"replaceState()")," 동작 시 웹뷰의 상태를 받아오도록 할 것이다."),"\n",e.createElement(a.h3,null,"2.1. ",e.createElement(a.code,null,"webview.injectJavaScript()")),"\n",e.createElement(a.p,null,e.createElement(a.code,null,"webview.injectJavaScript()")," 메서드는 웹뷰에 자바스크립트 코드를 삽입할 수 있도록 해주는 메서드이다. 해당 메서드를 통해 ",e.createElement(a.code,null,"pushState()"),"와 ",e.createElement(a.code,null,"replaceState()")," 메서드를 래핑해줄 것이다."),"\n",e.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token constant">INJECTED_CODE</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\n(function() {\n  function wrap(fn) {\n    return function wrapper() {\n      var res = fn.apply(this, arguments);\n      window.ReactNativeWebView.postMessage(\'navigationStateChange\');\n      return res;\n    }\n  }\n\n  history.pushState = wrap(history.pushState);\n  history.replaceState = wrap(history.replaceState);\n  window.addEventListener(\'popstate\', function() {\n    window.ReactNativeWebView.postMessage(\'navigationStateChange\');\n  });\n})();\n\ntrue;\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token function-variable function">HomeScreen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>WebView\n      <span class="token comment">// ...</span>\n      ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span>\n      onLoadStart<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">injectJavaScript</span><span class="token punctuation">(</span><span class="token constant">INJECTED_CODE</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n      onNavigationStateChange<span class="token operator">=</span><span class="token punctuation">{</span>setNavState<span class="token punctuation">}</span>\n    <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",e.createElement(a.h4,null,"2.1.1. ",e.createElement(a.code,null,"injectedJavaScript")," props 는 안 되나?"),"\n",e.createElement(a.p,null,"React Native WebView 에는 ",e.createElement(a.code,null,"webview.injectJavaScript()"),"메서드와 비슷한 기능을 하는 ",e.createElement(a.a,{href:"https://github.com/react-native-webview/react-native-webview/blob/master/docs/Reference.md#injectedjavascript"},e.createElement(a.code,null,"injectedJavaScript")," prop"),"도 존재한다. 하지만 결정적인 차이점이 존재하는데, ",e.createElement(a.code,null,"webview.injectJavaScript()"),"는 우리가 원하는 때에만 골라서 코드를 삽입할 수 있지만, ",e.createElement(a.code,null,"injectedJavaScript"),"는 ",e.createElement(a.code,null,"onLoad")," 이벤트가 발생할 때마다 코드를 삽입된다는 것이다."),"\n",e.createElement(a.p,null,e.createElement(a.code,null,"onLoadStart")," 이벤트는 실제 페이지 이동이 일어날 때만 발생하는데 반해 ",e.createElement(a.code,null,"onLoad")," 이벤트는 History API 등으로 로딩이 발생할 때도 발생한다. 때문에 같은 코드가 중복적으로 삽입될 수 있고, 우리는 그러한 현상을 피하기 위해 ",e.createElement(a.code,null,"onLoadStart"),"와 ",e.createElement(a.code,null,"injectJavaScript()")," 메서드를 조합해서 코드를 삽입한다."),"\n",e.createElement(a.p,null,"(단, ",e.createElement(a.code,null,"injectedJavaScriptBeforeContentLoaded")," prop 을 사용하면 위 코드와 거의 동일한 효과를 낼 수 있다.)"),"\n",e.createElement(a.h4,null,"2.1.2. 삽입된 코드는 어떤 코드?"),"\n",e.createElement(a.p,null,"위 코드에는 삽입된 코드가 통문자열로 되어있기 때문에 알아보기 힘들다. 하이라이트된 코드로 다시 살펴보자."),"\n",e.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">function</span> <span class="token function">wrap</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      window<span class="token punctuation">.</span>ReactNativeWebView<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">"navigationStateChange"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">return</span> res<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  history<span class="token punctuation">.</span>pushState <span class="token operator">=</span> <span class="token function">wrap</span><span class="token punctuation">(</span>history<span class="token punctuation">.</span>pushState<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  history<span class="token punctuation">.</span>replaceState <span class="token operator">=</span> <span class="token function">wrap</span><span class="token punctuation">(</span>history<span class="token punctuation">.</span>replaceState<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"popstate"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    window<span class="token punctuation">.</span>ReactNativeWebView<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">"navigationStateChange"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token boolean">true</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,e.createElement(a.code,null,"pushState()"),"와 ",e.createElement(a.code,null,"replaceState()"),"를 래핑하고 ",e.createElement(a.code,null,"popState")," 이벤트에 리스너를 붙이는 코드라는 것을 알 수 있다. 모든 코드들은 공통적으로 ",e.createElement(a.a,{href:"https://github.com/react-native-webview/react-native-webview/blob/master/docs/Reference.md#postmessagestr"},e.createElement(a.code,null,"ReactNativeWebView.postMessage()")," 메서드"),"를 호출하는 것을 볼 수 있다. 이 메서드가 호출될 때마다 웹뷰는 웹페이지의 상태를 ",e.createElement(a.code,null,"onMessage")," 콜백으로 받아볼 수 있다."),"\n",e.createElement(a.h3,null,"2.2. ",e.createElement(a.code,null,"onMessage")),"\n",e.createElement(a.p,null,"그럼 ",e.createElement(a.code,null,"onMessage")," 콜백도 넣어보자."),"\n",e.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">HomeScreen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>WebView\n      <span class="token comment">// ...</span>\n      ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span>\n      onLoadStart<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">injectJavaScript</span><span class="token punctuation">(</span><span class="token constant">INJECTED_CODE</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n      onNavigationStateChange<span class="token operator">=</span><span class="token punctuation">{</span>setNavState<span class="token punctuation">}</span>\n      onMessage<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> nativeEvent <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>nativeEvent<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">"navigationStateChange"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token function">setNavState</span><span class="token punctuation">(</span>nativeEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span><span class="token punctuation">}</span>\n    <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,"됐다. 이제 ",e.createElement(a.code,null,"pushState()"),", ",e.createElement(a.code,null,"replaceState()"),"도 놓치지 않게 되었다."),"\n",e.createElement(a.h2,null,"3. 전체 코드"),"\n",e.createElement(a.p,null,"(아래 코드는 이해를 돕기 위한 의사코드로, 실제로는 동작하지 않을 수도 있다)"),"\n",e.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token constant">INJECTED_CODE</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\n(function() {\n  function wrap(fn) {\n    return function wrapper() {\n      var res = fn.apply(this, arguments);\n      window.ReactNativeWebView.postMessage(\'navigationStateChange\');\n      return res;\n    }\n  }\n\n  history.pushState = wrap(history.pushState);\n  history.replaceState = wrap(history.replaceState);\n  window.addEventListener(\'popstate\', function() {\n    window.ReactNativeWebView.postMessage(\'navigationStateChange\');\n  });\n})();\n\ntrue;\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">HomeScreen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>navState<span class="token punctuation">,</span> setNavState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token function-variable function">onPress</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>navState<span class="token punctuation">.</span>canGoBack<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// 뒤로 갈 수 있는 상태라면 이전 웹페이지로 이동한다</span>\n        ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token comment">// 뒤로 갈 수 없는 상태라면</span>\n        <span class="token comment">// 다른 원하는 행동을 하면 된다</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 안드로이드 백버튼이 눌렸을 때 이벤트 리스너를 등록한다.</span>\n    BackHandler<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"hardwareBackPress"</span><span class="token punctuation">,</span> onPress<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      BackHandler<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"hardwareBackPress"</span><span class="token punctuation">,</span> onPress<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>navState<span class="token punctuation">.</span>canGoBack<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>WebView\n      <span class="token comment">// ...</span>\n      ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span>\n      onLoadStart<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">injectJavaScript</span><span class="token punctuation">(</span><span class="token constant">INJECTED_CODE</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n      onNavigationStateChange<span class="token operator">=</span><span class="token punctuation">{</span>setNavState<span class="token punctuation">}</span>\n      onMessage<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> nativeEvent <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>nativeEvent<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">"navigationStateChange"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token function">setNavState</span><span class="token punctuation">(</span>nativeEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span><span class="token punctuation">}</span>\n    <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",e.createElement(a.h2,null,"4. 참고"),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,e.createElement(a.a,{href:"https://github.com/react-native-webview/react-native-webview"},"React Native WebView")),"\n",e.createElement(a.li,null,e.createElement(a.a,{href:"https://github.com/react-native-webview/react-native-webview/issues/24#issuecomment-483956651"},"MIGRATED: iOS WebView doesn't support hash url change. The onNavigationStateChange listener will not be called when url hash changes. (#20447) #24")),"\n"))}var o,c,l,u,i=function(n){void 0===n&&(n={});const{wrapper:a}=Object.assign({},(0,t.ah)(),n.components);return a?e.createElement(a,n,e.createElement(p,n)):p(n)},r=s(1880),k=s(1883),m=s(3723),d=s(1858),g=s(3904),v=s(891),h=s(5534),w=s(5777),E=s(7178);const f=n=>{let{data:a,children:s}=n;const{frontmatter:t,sameSeriesPosts:p}=a.mdx,{title:o,slug:c,date:l,tags:u,series:i,heroImage:r,heroImageAlt:g}=t,v=r?(0,m.c)(r):null;return e.createElement(d.Z,null,e.createElement(S,null,e.createElement("h1",null,o),e.createElement(y,null,l),e.createElement(N,null,u.map((n=>e.createElement("li",{key:n},e.createElement(k.rU,{to:"/tags/"+n},n)))))),e.createElement(E.Z,{name:i,data:p,current:c}),!!v&&e.createElement(b,{image:v,alt:null!=g?g:""}),e.createElement(h.Z,null,s),e.createElement(w.Z,null))},S=v.ZP.div(o||(o=(0,r.Z)(["\n  margin: 60px 0 72px;\n  padding: 0 24px;\n\n  & > h1 {\n    font-size: 2.5rem;\n    word-break: keep-all;\n    margin: 0;\n  }\n"]))),b=(0,v.ZP)(m.G)(c||(c=(0,r.Z)(["\n  margin-bottom: 16px;\n"]))),y=v.ZP.div(l||(l=(0,r.Z)(["\n  margin: 16px 0;\n"]))),N=v.ZP.ul(u||(u=(0,r.Z)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: ","px;\n\n  margin: 0;\n  padding: 0;\n  list-style: none;\n\n  > li {\n    padding: ","px\n      ","px;\n    border-radius: 2px;\n\n    background-color: ",";\n    color: ",";\n\n    > a {\n      text-decoration: none;\n    }\n  }\n"])),(n=>n.theme.dimens.gutter),(n=>n.theme.dimens.spacing),(n=>n.theme.dimens.gutter),(n=>n.theme.colors.tag),(n=>n.theme.colors.onTag)),j=n=>{var a,s;let{data:t}=n;const{frontmatter:{title:p,slug:o,tags:c,heroImage:l,previewContent:u},excerpt:i}=t.mdx,r=l?(0,m.c)(l):null;return e.createElement(g.Z,{title:p,description:null!=u?u:i,path:"posts/"+o,thumbnail:null==r||null===(a=r.images)||void 0===a||null===(s=a.fallback)||void 0===s?void 0:s.src,keywords:c,ogType:"article"})};function C(n){return e.createElement(f,n,e.createElement(i,n))}}}]);
//# sourceMappingURL=component---src-pages-posts-mdx-frontmatter-slug-tsx-content-file-path-users-kangseong-workspace-private-ricalelog-posts-2021-210821-react-native-webview-android-back-button-index-mdx-7622bb95a8a51b512d29.js.map
"use strict";(self.webpackChunkricalelog=self.webpackChunkricalelog||[]).push([[3118],{4664:function(e,n,t){t.r(n),t.d(n,{Head:function(){return b},default:function(){return f}});var l=t(1151),a=t(7294);function r(e){const n=Object.assign({p:"p",h2:"h2",h3:"h3",pre:"pre",code:"code",a:"a",blockquote:"blockquote",ol:"ol",li:"li"},(0,l.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.p,null,"Mac OS 를 쓰면서 마주한 React Native 빌드 에러에 대해 정리한다."),"\n",a.createElement(n.p,null,"M1 프로세서를 사용 중인데 이것이 원인 중 하나인지는 명확하지 않다."),"\n",a.createElement(n.h2,null,"iOS"),"\n",a.createElement(n.h3,null,"1. (빌드 에러) node: No such file or directory"),"\n",a.createElement(n.p,null,"nvm 을 사용하고 있는 사람이라면, 아래 명령어 실행으로 해결할 수 있다."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},'sudo ln -s "$(which node)" /usr/local/bin/node\n')),"\n",a.createElement(n.p,null,"(",a.createElement(n.a,{href:"https://stackoverflow.com/a/66874780"},"출처"),")"),"\n",a.createElement(n.h3,null,"2. (빌드 에러) Something went wrong. Please verify if generated JS bundle is correct."),"\n",a.createElement(n.p,null,"번들 명령어를 통해 ",a.createElement(n.code,null,"main.jsbundle")," 파일을 직접 만들고, Xcode 에서 프로젝트를 연 뒤 해당 파일을 드래그앤드랍으로 넣어주면 된다."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},"yarn react-native bundle --platform ios --dev false --entry-file index.js --bundle-output ios/main.jsbundle\n")),"\n",a.createElement(n.p,null,"만약 이미 main.jsbundle 파일이 Xcode 상에 추가되어 있다면 기존 파일(레퍼런스)은 삭제 하고 새로 생성한 파일을 추가해보자."),"\n",a.createElement(n.p,null,"(",a.createElement(n.a,{href:"https://github.com/Microsoft/react-native-code-push/issues/1066#issuecomment-340233140"},"출처"),")"),"\n",a.createElement(n.h3,null,"3. (",a.createElement(n.code,null,"pod install"),' 에러) CocoaPods could not find compatible versions for pod "Firebase/Analytics"'),"\n",a.createElement(n.p,null,"비단 Firebase/Analytics 만의 문제가 아니라, 라이브러리를 추가/버전업 할 때 마주할 수 있는 에러로 보인다."),"\n",a.createElement(n.p,null,"일단은 ",a.createElement(n.code,null,"ios/Podfile.lock")," 파일을 삭제한 뒤 아래 명령어로 해결했다."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-sh"},"pod install --repo-update\n")),"\n",a.createElement(n.h2,null,"안드로이드"),"\n",a.createElement(n.h3,null,"1. (빌드 에러) An exception has occurred in the compiler (1.8.0_292)"),"\n",a.createElement(n.p,null,"에러 전문은 아래와 같다."),"\n",a.createElement(n.blockquote,null,"\n",a.createElement(n.p,null,"An exception has occurred in the compiler (1.8.0_292). Please file a bug against the Java compiler via the Java bug reporting page (",a.createElement(n.a,{href:"http://bugreport.java.com"},"http://bugreport.java.com"),") after checking the Bug Database (",a.createElement(n.a,{href:"http://bugs.java.com"},"http://bugs.java.com"),") for duplicates. Include your program and the following diagnostic in your report. Thank you.\njava.lang.AssertionError: annotationType(): unrecognized Attribute name MODULE (class com.sun.tools.javac.util.UnsharedNameTable$NameImpl)"),"\n"),"\n",a.createElement(n.p,null,"react-native-fierbase/messaging 을 설치한 뒤 발생했다. 해당 라이브러리에 직접적인 문제가 있다기보다는, 안드로이드 SDK 버전이 올라가면서 필요한 openjdk 버전도 올라간 것 같다."),"\n",a.createElement(n.p,null,"openjdk 버전을 11로 올려주면 해결된다. 아래는 MacOS 에서 openjdk11 을 설치하는 명령어다."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},"$ brew tap adoptopenjdk/openjdk\n$ brew install --cask adoptopenjdk11\n")),"\n",a.createElement(n.p,null,"(",a.createElement(n.a,{href:"https://github.com/invertase/react-native-firebase/issues/5909"},"출처1"),", ",a.createElement(n.a,{href:"https://apple.stackexchange.com/questions/349454/how-can-i-upgrade-my-mac-to-openjdk-11-using-homebrew"},"출처2"),")"),"\n",a.createElement(n.h3,null,"2. (Metro 에러) jest-haste-map: Watchman crawl failed. Retrying once with node crawler."),"\n",a.createElement(n.p,null,"안드로이드 개발 빌드에서 느닷없이 hot reloading 이 동작하지 않는 현상이 발생했다. Metro 쪽을 보니 아래와 같은 에러 메시지가 찍혀 있었다."),"\n",a.createElement(n.blockquote,null,"\n",a.createElement(n.p,null,"jest-haste-map: Watchman crawl failed. Retrying once with node crawler.\nUsually this happens when watchman isn't running. Create an empty ",a.createElement(n.code,null,".watchmanconfig")," file in your project's root folder or initialize a git or hg repository in your project.\nError: Watchman error: watchman::QueryExecError: query failed: synchronization failed: syncToNow: timed out waiting for cookie file to be observed by watcher within 60000 milliseconds: Operation timed out. Make sure watchman is running for this project. See ",a.createElement(n.a,{href:"https://facebook.github.io/watchman/docs/troubleshooting"},"https://facebook.github.io/watchman/docs/troubleshooting"),"."),"\n"),"\n",a.createElement(n.p,null,"구글링을 하다가 ",a.createElement(n.a,{href:"https://github.com/facebook/draft-js/issues/2183"},"나와 같은 증상의 이슈"),"를 찾았다. 그래서 코멘트에 있는 답변들을 시도해봤는데, 안 되고 안 되고 안 되다가 결국에는 해결되었다. 내가 진행한 과정은 아래와 같다."),"\n",a.createElement(n.ol,null,"\n",a.createElement(n.li,null,a.createElement(n.code,null,"brew reinstall watchman")),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"watch-del-all && yarn cache clean && react-native start --reset-cache")),"\n",a.createElement(n.li,null,a.createElement(n.code,null,".watchmanconfig")," 삭제 후 새로 파일을 만든 뒤 기존과 동일한 내용을 넣음"),"\n",a.createElement(n.li,null,"재부팅"),"\n"),"\n",a.createElement(n.p,null,"마지막에 재부팅을 하고 나서야 해결되었다. 이게 저 위의 네 과정을 다 거쳐야 하는 것인지, 저 중 하나만 하면 되는 건지, 몇 개만 조합하면 되는 건지, 그건 불명이다."))}var c,o=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?a.createElement(n,e,a.createElement(r,e)):r(e)},i=t(1880),s=t(1883),m=t(3723),u=t(1858),p=t(3904),h=t(891),d=t(5534);const g=e=>{let{data:n,children:t}=e;const{title:l,date:r,tags:c,heroImage:o,heroImageAlt:i}=n.mdx.frontmatter,p=o?(0,m.c)(o):null;return a.createElement(u.Z,null,a.createElement("h1",null,l),a.createElement(E,null,c.map((e=>a.createElement("li",{key:e},a.createElement(s.rU,{to:"/tags/"+e},e))))),a.createElement("div",null,r),!!p&&a.createElement(m.G,{image:p,alt:null!=i?i:""}),a.createElement(d.Z,null,t),a.createElement("script",{src:"https://utteranc.es/client.js",repo:"ricale/blog","issue-term":"pathname",label:"utterances",theme:"github-dark",crossOrigin:"anonymous",async:!0}))},E=h.ZP.ul(c||(c=(0,i.Z)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: ","px;\n\n  margin: 0;\n  padding: 0;\n  list-style: none;\n\n  > li {\n    padding: ","px ","px\n      0px;\n    border-radius: 2px;\n\n    background-color: ",";\n    color: ",";\n\n    > a {\n      text-decoration: none;\n    }\n  }\n"])),(e=>e.theme.dimens.gutter),(e=>e.theme.dimens.thin),(e=>e.theme.dimens.gutter),(e=>e.theme.colors.tag),(e=>e.theme.colors.onTag)),b=e=>{var n,t;let{data:l}=e;const{frontmatter:{title:r,slug:c,tags:o,heroImage:i},excerpt:s}=l.mdx,u=i?(0,m.c)(i):null;return a.createElement(a.Fragment,null,a.createElement(p.Z,{title:r,description:s,path:"posts/"+c,thumbnail:null==u||null===(n=u.images)||void 0===n||null===(t=n.fallback)||void 0===t?void 0:t.src,keywords:o,ogType:"article"}))};function f(e){return a.createElement(g,e,a.createElement(o,e))}}}]);
//# sourceMappingURL=component---src-pages-posts-mdx-frontmatter-slug-tsx-content-file-path-users-kangseong-workspace-private-ricalelog-posts-2022-220227-react-native-build-error-2-index-mdx-1adbc667c1b65b13476b.js.map
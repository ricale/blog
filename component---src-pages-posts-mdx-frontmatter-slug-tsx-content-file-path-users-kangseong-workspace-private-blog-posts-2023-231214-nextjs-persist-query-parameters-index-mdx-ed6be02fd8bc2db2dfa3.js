"use strict";(self.webpackChunkricalelog=self.webpackChunkricalelog||[]).push([[7639],{2765:function(n,a,e){e.r(a),e.d(a,{Head:function(){return C},default:function(){return S}});var t=e(1151),s=e(7294);function o(n){const a=Object.assign({div:"div",h2:"h2",a:"a",p:"p",code:"code",button:"button",ol:"ol",li:"li",blockquote:"blockquote",ul:"ul",em:"em"},(0,t.ah)(),n.components);return s.createElement(s.Fragment,null,s.createElement(a.div,{className:"md"},s.createElement(a.h2,{id:"요구사항",style:{position:"relative"}},s.createElement(a.a,{href:"#%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD","aria-label":"요구사항 permalink",className:"anchor before"},s.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"요구사항"),s.createElement(a.p,null,"Next.js 웹앱에서 특정 쿼리 파라미터의 값을 페이지 이동 시에도 유지하고 싶다는 요청을 받았다."),s.createElement(a.p,null,"예를 들어 아래처럼 Next.js 웹앱에 접근한다면"),s.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">http://localhost:3000/main?experiment=someSpec</code></pre></div>'}}),s.createElement(a.p,null,"앱 내 다른 페이지로 이동해도 ",s.createElement(a.code,null,"experiment")," 쿼리 파라미터의 값은 유지하고 싶다는 것이다."),s.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">http://localhost:3000/anotherPage?experiment=someSpec</code></pre></div>'}}),s.createElement(a.h2,{id:"간단한-방법",style:{position:"relative"}},s.createElement(a.a,{href:"#%EA%B0%84%EB%8B%A8%ED%95%9C-%EB%B0%A9%EB%B2%95","aria-label":"간단한 방법 permalink",className:"anchor before"},s.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"간단한 방법"),s.createElement(a.p,null,"간단하게 생각할 수 있는 방법으로는 next/router 의 ",s.createElement(a.a,{href:"https://nextjs.org/docs/pages/api-reference/functions/use-router"},s.createElement(a.code,null,"useRouter()"))," 와 next/link 의 ",s.createElement(a.a,{href:"https://nextjs.org/docs/pages/api-reference/components/link"},s.createElement(a.code,null,"<Link />"))," 를 한 번 래핑해서 사용하는 것이 있다."),s.createElement(a.div,{className:"codeblock-container"},s.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// `useRouter()` 래핑 예시</span>\n\n<span class="token keyword">const</span> persistKeys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"experiment"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token function-variable function">useMyRouter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">push</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> query<span class="token punctuation">,</span> <span class="token operator">...</span>props <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> queryWithPersistKeys <span class="token operator">=</span> persistKeys<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>\n        <span class="token punctuation">(</span>acc<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>\n          <span class="token operator">...</span>acc<span class="token punctuation">,</span>\n          <span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">:</span> router<span class="token punctuation">.</span>query<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token punctuation">{</span> <span class="token operator">...</span>query <span class="token punctuation">}</span>\n      <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> query<span class="token operator">:</span> queryWithPersistKeys<span class="token punctuation">,</span> <span class="token operator">...</span>props <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token comment">// ...</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),s.createElement(a.button,{className:"codeblock-copy-button"},"COPY")),s.createElement(a.div,{className:"codeblock-container"},s.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// `&lt;Link />` 래핑 예시</span>\n\n<span class="token keyword">const</span> persistKeys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"experiment"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token function-variable function">MyLink</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> href<span class="token punctuation">,</span> <span class="token operator">...</span>props <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>pathname<span class="token punctuation">,</span> queryString<span class="token punctuation">]</span> <span class="token operator">=</span> href<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> searchParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  persistKeys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    searchParams<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> router<span class="token punctuation">.</span>query<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> hrefWithQuery <span class="token operator">=</span>\n    searchParams<span class="token punctuation">.</span>size <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pathname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>searchParams<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> pathname<span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>hrefWithQuery<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),s.createElement(a.button,{className:"codeblock-copy-button"},"COPY")),s.createElement(a.p,null,s.createElement(a.code,null,"useRouter()")," 대신 ",s.createElement(a.code,null,"useMyRouter()")," 를, ",s.createElement(a.code,null,"<Link />")," 대신에 ",s.createElement(a.code,null,"<MyLink />")," 를 사용한다면 페이지 이동 시에도 원하는 쿼리 파라미터의 값을 유지시킬 수 있을 것이다."),s.createElement(a.h2,{id:"간단한-방법의-이슈",style:{position:"relative"}},s.createElement(a.a,{href:"#%EA%B0%84%EB%8B%A8%ED%95%9C-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%9D%B4%EC%8A%88","aria-label":"간단한 방법의 이슈 permalink",className:"anchor before"},s.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),'"간단한 방법"의 이슈'),s.createElement(a.p,null,"하지만 이 방식에는 몇 가지 이슈가 있다."),s.createElement(a.ol,null,"\n",s.createElement(a.li,null,"이미 ",s.createElement(a.code,null,"useRouter()")," 와 ",s.createElement(a.code,null,"<Link />")," 를 래핑하지 않은 채로 많은 곳에서 사용하고 있다면, 일일이 찾아 바꾸기에는 너무 번거롭다."),"\n",s.createElement(a.li,null,"외부 라이브러리 중 ",s.createElement(a.code,null,"useRouter()"),", ",s.createElement(a.code,null,"<Link />")," 를 내부적으로 사용하고 있는 라이브러리가 있다면, 그들에 대해서도 라이브러리 수정 없이 대응할 수 있어야 한다."),"\n",s.createElement(a.li,null,"혹시라도 팀원 중 한명이 래핑한 ",s.createElement(a.code,null,"useMyRouter()"),", ",s.createElement(a.code,null,"<MyLink />")," 가 아니라 실수로 ",s.createElement(a.code,null,"useRouter()"),", ",s.createElement(a.code,null,"<Link />")," 를 사용한다면, 래핑한 훅/컴포넌트의 로직은 무용지물이 된다."),"\n"),s.createElement(a.h2,{id:"더-좋은-방법",style:{position:"relative"}},s.createElement(a.a,{href:"#%EB%8D%94-%EC%A2%8B%EC%9D%80-%EB%B0%A9%EB%B2%95","aria-label":"더 좋은 방법 permalink",className:"anchor before"},s.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"더 좋은 방법"),s.createElement(a.p,null,"그렇다면 이 약점들을 극복하기 위한 방법은 무엇이 있을까? 바로 ",s.createElement(a.a,{href:"https://nextjs.org/docs/pages/api-reference/functions/use-router#routerevents"},"next/router 의 이벤트 리스너"),"를 사용하는 것이다. next/router 에는 아래와 같은 이벤트 리스너들이 있다."),s.createElement(a.blockquote,null,"\n",s.createElement(a.ul,null,"\n",s.createElement(a.li,null,s.createElement(a.code,null,"routeChangeStart(url, { shallow })")," - Fires when a route starts to change"),"\n",s.createElement(a.li,null,s.createElement(a.code,null,"routeChangeComplete(url, { shallow })")," - Fires when a route changed completely"),"\n",s.createElement(a.li,null,s.createElement(a.code,null,"routeChangeError(err, url, { shallow })")," - Fires when there's an error when changing routes, or a route load is cancelled","\n",s.createElement(a.ul,null,"\n",s.createElement(a.li,null,s.createElement(a.code,null,"err.cancelled")," - Indicates if the navigation was cancelled"),"\n"),"\n"),"\n",s.createElement(a.li,null,s.createElement(a.code,null,"beforeHistoryChange(url, { shallow })")," - Fires before changing the browser's history"),"\n",s.createElement(a.li,null,s.createElement(a.code,null,"hashChangeStart(url, { shallow })")," - Fires when the hash will change but not the page"),"\n",s.createElement(a.li,null,s.createElement(a.code,null,"hashChangeComplete(url, { shallow })")," - Fires when the hash has changed but not the page"),"\n"),"\n"),s.createElement(a.p,null,"이 중 ",s.createElement(a.code,null,"routeChangeStart")," 가 우리가 하고자 하는 일에 적합한 리스너이다."),s.createElement(a.p,null,"문서에는 자세히 적혀있지 않지만 ",s.createElement(a.code,null,"routeChangeStart")," 내에서 페이지 이동 함수 (예를 들면 ",s.createElement(a.code,null,"router.push()"),") 를 실행하면 기존 페이지 이동은 ",s.createElement(a.em,null,"취소"),"되고 새로 실행된 페이지 이동 함수의 페이지 이동만 적용된다."),s.createElement(a.p,null,"즉 페이지 이동 직전에 현재 유지하고 싶은 쿼리 파라미터가 있는지 확인하고, 있다면 기존 이동 대신 해당 쿼리 파라미터를 포함한 새로운 이동을 실행하면 되는 것이다. (없다면 기존의 페이지 이동이 실행되도록 그냥 넘어간다.)"),s.createElement(a.div,{className:"codeblock-container"},s.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// routeChangeStart 리스너 사용 예시</span>\n\n<span class="token keyword">const</span> persistKeys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"experiment"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token function-variable function">usePersistQueryParameters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token function-variable function">routeChangeStart</span> <span class="token operator">=</span> <span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> persistQuery <span class="token operator">=</span> persistKeys<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> value <span class="token operator">=</span> router<span class="token punctuation">.</span>query<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>url<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[?&amp;]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          acc<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>name<span class="token punctuation">,</span> value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> acc<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>persistQuery<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> <span class="token punctuation">[</span>pathname<span class="token punctuation">,</span> query<span class="token punctuation">]</span> <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">const</span> searchParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> persistQuery<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          searchParams<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n          pathname<span class="token punctuation">,</span>\n          query<span class="token operator">:</span> searchParams<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"routeChangeStart"</span><span class="token punctuation">,</span> routeChangeStart<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"routeChangeStart"</span><span class="token punctuation">,</span> routeChangeStart<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>router<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),s.createElement(a.button,{className:"codeblock-copy-button"},"COPY")),s.createElement(a.p,null,"이렇게 하면 ",s.createElement(a.code,null,"useMyRouter()"),", ",s.createElement(a.code,null,"<MyLink />")," 처럼 기존 함수/컴포넌트들을 래핑하지 않고도, 페이지 이동 시에도 원하는 쿼리 파라미터의 값을 유지시킬 수 있다."),s.createElement(a.h2,{id:"더-좋은-방법의-이슈",style:{position:"relative"}},s.createElement(a.a,{href:"#%EB%8D%94-%EC%A2%8B%EC%9D%80-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%9D%B4%EC%8A%88","aria-label":"더 좋은 방법의 이슈 permalink",className:"anchor before"},s.createElement(a.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),'"더 좋은 방법"의 이슈'),s.createElement(a.p,null,"적용해서 사용해봤을 때 특별한 이슈는 없었다."),s.createElement(a.p,null,"다만 ",s.createElement(a.code,null,"routeChangeStart")," 에서 페이지 이동을 취소하고 새로운 페이지 이동을 실행하는 것이 성능 상의 이슈를 불러올 수도 있지 않을까 하는 걱정은 있다."),s.createElement(a.p,null,'하지만 "페이지 이동 시에도 원하는 쿼리 파라미터의 값 유지" 기능은 실험적인 기능 사용 등 제한된 목적에 대해서만 사용할 계획이므로, 설령 성능 상에 이슈가 있다고 해도 큰 문제는 되지 않을 것이다.'),s.createElement(a.p,null,"당연히 (실험적인 기능 등을 사용할 일이 없는) 일반 사용자에게는 아무런 영향이 없다.")),"\n",s.createElement(a.div,{className:"toc"},s.createElement(a.p,null,"목차"),s.createElement(a.ul,null,"\n",s.createElement(a.li,null,s.createElement(a.a,{href:"#%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD"},"요구사항")),"\n",s.createElement(a.li,null,s.createElement(a.a,{href:"#%EA%B0%84%EB%8B%A8%ED%95%9C-%EB%B0%A9%EB%B2%95"},"간단한 방법")),"\n",s.createElement(a.li,null,s.createElement(a.a,{href:"#%EA%B0%84%EB%8B%A8%ED%95%9C-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%9D%B4%EC%8A%88"},'"간단한 방법"의 이슈')),"\n",s.createElement(a.li,null,s.createElement(a.a,{href:"#%EB%8D%94-%EC%A2%8B%EC%9D%80-%EB%B0%A9%EB%B2%95"},"더 좋은 방법")),"\n",s.createElement(a.li,null,s.createElement(a.a,{href:"#%EB%8D%94-%EC%A2%8B%EC%9D%80-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%9D%B4%EC%8A%88"},'"더 좋은 방법"의 이슈')),"\n")))}var p,c,l,r=function(n){void 0===n&&(n={});const{wrapper:a}=Object.assign({},(0,t.ah)(),n.components);return a?s.createElement(a,n,s.createElement(o,n)):o(n)},u=e(1880),i=e(1883),k=e(3723),d=e(9178),m=e(3904),h=e(891),g=e(3234),f=e(6117),E=e(5777),v=e(7178),b=e(5924);function x(n){let{data:a,children:e}=n;const t=s.useRef(),{frontmatter:o,sameSeriesPosts:p}=a.mdx,{title:c,slug:l,date:r,series:u}=o;return s.useEffect((()=>{var n;const a=null===(n=t.current)||void 0===n?void 0:n.querySelectorAll(".md h1, .md h2, .md h3, .md h4, .md h5, .md h6"),e=new IntersectionObserver((()=>(0,b.Z)(t,a)),{rootMargin:"0px 0px -90% 0px",threshold:[0,1]});return null==a||a.forEach((n=>e.observe(n))),()=>e.disconnect()}),[]),s.createElement(d.Z,null,s.createElement(y,null,s.createElement("h1",null,s.createElement(i.Link,{to:"/posts/"+l},c)),s.createElement(w,null,r)),s.createElement(v.Z,{name:u,data:p,current:l}),s.createElement(B,{ref:t},e),s.createElement(f.Z,{data:p,current:l}),s.createElement(E.Z,null))}const y=h.ZP.div(p||(p=(0,u.Z)(["\n  margin: 72px 0 84px;\n  padding: 0 32px;\n\n  & > h1 {\n    font-size: 2.5rem;\n    word-break: keep-all;\n    margin: 0;\n\n    > a {\n      color: ",";\n    }\n  }\n"])),(n=>n.theme.colors.onBackground)),w=h.ZP.div(c||(c=(0,u.Z)(["\n  margin-left: 2px;\n"]))),B=(0,h.ZP)(g.Z)(l||(l=(0,u.Z)(["\n  margin-bottom: 120px;\n"]))),C=n=>{var a,e;let{data:t}=n;const{frontmatter:{title:o,slug:p,tags:c,heroImage:l,previewContent:r},excerpt:u}=t.mdx,i=l?(0,k.c)(l):null;return s.createElement(m.Z,{title:o,description:null!=r?r:u,path:"posts/"+p,thumbnail:null==i||null===(a=i.images)||void 0===a||null===(e=a.fallback)||void 0===e?void 0:e.src,keywords:c,ogType:"article"})};function S(n){return s.createElement(x,n,s.createElement(r,n))}},5777:function(n,a,e){var t=e(7294);a.Z=function(){const n=(0,t.useRef)(null);return(0,t.useEffect)((()=>{var a;const e=document.createElement("script");Object.entries({src:"https://giscus.app/client.js","data-repo":"ricale/blog","data-repo-id":"R_kgDOIvqo5g","data-category":"Giscus","data-category-id":"DIC_kwDOIvqo5s4CT7fR","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":"dark","data-lang":"ko",crossorigin:"anonymous",async:"true"}).forEach((n=>{let[a,t]=n;e.setAttribute(a,t)})),null===(a=n.current)||void 0===a||a.appendChild(e)}),[]),t.createElement("div",{id:"comments",ref:n})}},3234:function(n,a,e){e.d(a,{Z:function(){return y}});var t,s=e(1880),o=e(891);var p,c=(0,o.iv)(t||(t=(0,s.Z)(["\n  blockquote {\n    position: relative;\n\n    margin-left: 0;\n    margin-right: 0;\n    margin-bottom: 16px;\n    padding: 16px 32px;\n    border-left: 1px solid ",";\n    border-left-width: 10px;\n\n    background-color: ",";\n\n    > :first-child {\n      margin-top: 0;\n    }\n    > :last-child {\n      margin-bottom: 0;\n    }\n    > ul,\n    > ol {\n      padding-left: 20px;\n    }\n  }\n\n  blockquote:before {\n    content: '\"';\n\n    position: absolute;\n    top: -10px;\n    left: 5px;\n\n    font-size: 3em;\n    color: ",";\n  }\n  blockquote:after {\n    content: '\"';\n\n    position: absolute;\n    bottom: -30px;\n    right: 5px;\n\n    font-size: 3em;\n    color: ",";\n  }\n"])),(n=>n.theme.colors.blockquoteBorder),(n=>n.theme.colors.blockquote),(n=>n.theme.colors.blockquoteBorder),(n=>n.theme.colors.blockquoteBorder));var l,r=(0,o.iv)(p||(p=(0,s.Z)(['\n  pre[class*="language-"] {\n    margin: 0 0 16px;\n  }\n\n  code[class*="language-"] {\n    font-size: 0.85rem;\n  }\n\n  .gatsby-highlight-code-line {\n    display: block;\n\n    margin-left: -1em;\n    margin-right: -1em;\n    padding-top: 1.8px;\n    padding-bottom: 1.8px;\n    padding-left: 0.75em;\n    padding-right: 1em;\n    border-left: 0.25em solid ',";\n\n    background-color: ",";\n  }\n\n  .line-numbers .line-numbers-rows {\n    bottom: 0;\n    padding-top: 17.5px;\n    padding-left: 12px;\n  }\n\n  pre > code {\n    padding: unset;\n    border-radius: unset;\n    background-color: unset;\n    color: unset;\n  }\n  .codeblock-container {\n    position: relative;\n    padding-top: 0.1px;\n    .codeblock-title {\n      position: absolute;\n      top: 0px;\n      left: 8px;\n      z-index: 1;\n\n      padding: 2px 8px;\n\n      font-size: 0.875rem;\n      font-family: consolas, monospace;\n      background-color: ",";\n    }\n    .codeblock-copy-button {\n      position: absolute;\n      top: 0;\n      right: 0;\n\n      padding: 4px 6px;\n      border: 0;\n\n      font-size: 0.75rem;\n      color: ",';\n      text-decoration: underline;\n\n      background-color: transparent;\n      cursor: pointer;\n    }\n    .codeblock-title + div pre[class*="language-"] {\n      margin-top: 8px;\n    }\n    .codeblock-title + div + .codeblock-copy-button {\n      top: 8px;\n    }\n  }\n\n  @media (max-width: 500px) {\n    .codeblock-container {\n      padding-top: 0;\n      .codeblock-title {\n        position: static;\n        background-color: ',";\n      }\n    }\n  }\n"])),(n=>n.theme.colors.codeblockHighlightBorder),(n=>n.theme.colors.codeblockHighlight),(n=>n.theme.colors.codeblockTitle),(n=>n.theme.colors.codeblockCopyButtonLabel),(n=>n.theme.colors.codeblockTitleInMobile));var u,i=(0,o.iv)(l||(l=(0,s.Z)(["\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin-top: 24px;\n    margin-bottom: 16px;\n    line-height: 1.25;\n    font-weight: 600;\n\n    > a.anchor path {\n      fill: white;\n    }\n  }\n\n  h1 {\n    padding-bottom: 0.3em;\n    border-bottom: 1px solid ",";\n    font-size: 2.125em;\n  }\n\n  h2 {\n    padding-bottom: 0.3em;\n    border-bottom: 1px solid ",";\n    font-size: 1.75em;\n  }\n\n  h3 {\n    font-size: 1.5em;\n  }\n\n  h4 {\n    font-size: 1.25em;\n  }\n\n  h5 {\n    font-size: 1em;\n  }\n\n  h6 {\n    font-size: 0.9375em;\n  }\n"])),(n=>n.theme.colors.headingBorder),(n=>n.theme.colors.headingBorder));var k,d=(0,o.iv)(u||(u=(0,s.Z)(["\n  img {\n    border: 1px solid ",";\n  }\n\n  img:not([class]) {\n    max-width: 600px;\n    margin-bottom: 16px;\n  }\n\n  .gatsby-resp-image-figure {\n    margin: 0 0 16px;\n    .gatsby-resp-image-wrapper {\n      margin-bottom: 0;\n    }\n    .gatsby-resp-image-figcaption {\n      margin-top: 4px;\n      text-align: center;\n      font-size: 0.875rem;\n      color: ",";\n    }\n  }\n  .gatsby-resp-image-wrapper {\n    margin-bottom: 16px;\n  }\n"])),(n=>n.theme.colors.imageBorder),(n=>n.theme.colors.imageCaptionText));var m,h=(0,o.iv)(k||(k=(0,s.Z)(["\n  ul,\n  ol {\n    margin-bottom: 16px;\n  }\n  li > ul,\n  li > ol {\n    margin-top: 0;\n    margin-bottom: 0;\n  }\n"])));var g,f,E=(0,o.iv)(m||(m=(0,s.Z)(["\n  table {\n    width: max-content;\n    max-width: 100%;\n    margin-bottom: 16px;\n    border-collapse: collapse;\n    td,\n    th {\n      padding: 6px 13px;\n      border: 1px solid ",";\n    }\n  }\n"])),(n=>n.theme.colors.tableBorder)),v=e(5785);var b,x=(0,o.iv)(g||(g=(0,s.Z)(["\n  > .md {\n    order: 1;\n  }\n\n  > .toc {\n    font-size: 0.875rem;\n    > ul {\n      margin: 0;\n      padding: 0;\n      list-style: none;\n\n      ul {\n        list-style: none;\n      }\n    }\n  }\n  @media (max-width: 1099px) {\n    > .toc {\n      display: none;\n    }\n  }\n  @media (min-width: 1100px) {\n    > .toc {\n      position: absolute;\n      top: 8px;\n      left: calc(50% + 400px);\n      height: 100%;\n      > p {\n        display: none;\n      }\n      > ul {\n        position: sticky;\n        top: 10px;\n        padding-left: 8px;\n        border-left: 1px solid ",";\n\n        white-space: nowrap;\n\n        a {\n          color: ",";\n        }\n        a > code {\n          color: ",";\n        }\n        code {\n          white-space: nowrap;\n        }\n        overflow: hidden;\n        ul {\n          padding-left: 15px;\n        }\n      }\n\n      .highlight {\n        color: ",";\n        text-decoration: underline;\n        code {\n          color: ",";\n          text-decoration: underline;\n        }\n      }\n    }\n  }\n  > .toc {\n    ","\n\n    @media (min-width: ","px) {\n      > ul {\n        white-space: inherit;\n        code {\n          white-space: inherit;\n        }\n      }\n    }\n  }\n"])),(n=>n.theme.colors.inactiveText),(n=>n.theme.colors.inactiveText),(n=>n.theme.colors.inactiveText),(n=>n.theme.colors.onBackground),(n=>n.theme.colors.onBackground),(0,v.Z)(new Array(20)).map(((n,a)=>(0,o.iv)(f||(f=(0,s.Z)(["\n          @media (min-width: ","px) {\n            width: ","px;\n          }\n        "])),1100+20*(a+1),(1100+20*a-800)/2))),1100);var y=o.ZP.div(b||(b=(0,s.Z)(["\n  position: relative;\n\n  display: flex;\n  flex-direction: column;\n  font-size: 16px;\n  line-height: 1.5;\n\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n\n  p {\n    margin-top: 0;\n    margin-bottom: 16px;\n  }\n\n  hr {\n    height: 0.25em;\n    margin: 24px 0;\n    border: 0;\n\n    background-color: ",";\n  }\n\n  code {\n    padding: 0.2em 0.4em;\n    border-radius: 2px;\n\n    font-size: 0.85em;\n\n    background-color: ",";\n    color: ",";\n    white-space: break-spaces;\n  }\n\n  a > code {\n    color: skyblue;\n  }\n\n  & > .md > :first-child {\n    margin-top: 0;\n  }\n"])),i,h,d,x,r,c,E,(n=>n.theme.colors.hr),(n=>n.theme.colors.code),(n=>n.theme.colors.onCode))},6117:function(n,a,e){e.d(a,{Z:function(){return g}});var t,s,o,p=e(1880),c=e(7294),l=e(891),r=e(1883);const u=(0,l.ZP)(r.Link)(t||(t=(0,p.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: ",";\n\n  max-width: 100%;\n  padding: 16px;\n\n  background-color: ",";\n\n  &:hover {\n    text-decoration: none;\n  }\n"])),(n=>n.next?"flex-end":"flex-start"),(n=>n.theme.colors.nearbyPostLink)),i=l.ZP.div(s||(s=(0,p.Z)(["\n  font-size: 0.75rem;\n  color: ",";\n"])),(n=>n.theme.colors.onNearbyPostLink)),k=l.ZP.div(o||(o=(0,p.Z)(["\n  max-width: 100%;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n"])));var d,m=function(n){let{title:a,slug:e,desc:t,...s}=n;return c.createElement(u,Object.assign({},s,{to:"/posts/"+e}),c.createElement(i,null,t),c.createElement(k,null,a))};const h=l.ZP.div(d||(d=(0,p.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 16px;\n\n  margin: 120px 0;\n\n  & > div {\n    display: flex;\n    flex-direction: column;\n\n    overflow: hidden;\n  }\n  & > :nth-child(1) {\n    align-items: flex-start;\n  }\n  & > :nth-child(2) {\n    align-items: flex-end;\n  }\n"])));var g=function(n){var a,e;let{data:t,current:s}=n;if(!t)return null;const o=t.findIndex((n=>n.frontmatter.slug===s)),p=null===(a=t[o-1])||void 0===a?void 0:a.frontmatter,l=null===(e=t[o+1])||void 0===e?void 0:e.frontmatter;return c.createElement(h,null,c.createElement("div",null,!!p&&c.createElement(m,Object.assign({},p,{desc:"❮ 시리즈 이전글"}))),c.createElement("div",null,!!l&&c.createElement(m,Object.assign({},l,{next:!0,desc:"시리즈 다음글 ❯"}))))}},7178:function(n,a,e){var t,s,o,p,c,l=e(1880),r=e(7294),u=e(1883),i=e(891);const k=i.ZP.div(t||(t=(0,l.Z)(["\n  margin-bottom: 16px;\n  align-items: center;\n\n  background-color: ",";\n"])),(n=>n.theme.colors.sameSereisPosts)),d=i.ZP.div(s||(s=(0,l.Z)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 16px;\n  cursor: pointer;\n  user-select: none;\n\n  > h2 {\n    margin: 0;\n    font-size: 1rem;\n    > a {\n      color: ",";\n    }\n  }\n\n  > span {\n    transform: rotate(","deg);\n    transition: transform 0.2s;\n  }\n"])),(n=>n.theme.colors.onBackground),(n=>n.collapsed?0:180)),m=i.ZP.ol(o||(o=(0,l.Z)(["\n  margin: 0;\n  border-top: 1px solid ",";\n  padding-top: 16px;\n  padding-left: 48px;\n  padding-bottom: 16px;\n"])),(n=>n.theme.colors.background)),h=i.ZP.li(p||(p=(0,l.Z)(["\n  margin-bottom: 4px;\n  font-size: 0.9375rem;\n  color: ",";\n  & > a {\n    color: ",";\n  }\n  ","\n"])),(n=>n.theme.colors.inactiveText),(n=>n.theme.colors.inactiveText),(n=>n.active&&(0,i.iv)(c||(c=(0,l.Z)(["\n      color: ",";\n      & > a {\n        color: ",";\n        text-decoration: underline;\n      }\n    "])),(n=>n.theme.colors.onBackground),(n=>n.theme.colors.onBackground))));a.Z=function(n){let{name:a,data:e,current:t}=n;const[s,o]=r.useState(!0);return e?r.createElement(k,null,r.createElement(d,{collapsed:s,onClick:()=>o((n=>!n))},r.createElement("h2",null,r.createElement(u.Link,{to:"/series/"+a+"/"},'시리즈 "'+a+'"')),r.createElement("span",null,"▲")),!s&&r.createElement(m,null,e.map((n=>{let{frontmatter:{slug:a,title:e}}=n;return r.createElement(h,{active:a===t,key:a},r.createElement(u.Link,{to:"/posts/"+a},e))})))):null}},5924:function(n,a){const e="highlight";a.Z=function(n,a){var t,s,o;if(!a)return;const p=document.documentElement.scrollTop+10-(null!==(t=null===(s=n.current)||void 0===s?void 0:s.offsetTop)&&void 0!==t?t:0);let c;for(let e=0;e<a.length;e++)if(a[e].offsetTop>p){var l;c=null!==(l=a[e-1])&&void 0!==l?l:null;break}if(void 0===c&&(c=a[a.length-1]),null===(o=n.current)||void 0===o||o.querySelectorAll(".highlight").forEach((n=>n.classList.remove(e))),c){var r;const a=c.getAttribute("id"),t=".toc a[href='#"+encodeURI(null!=a?a:"")+"']",s=null===(r=n.current)||void 0===r?void 0:r.querySelector(t);null==s||s.classList.add(e)}}},1151:function(n,a,e){e.d(a,{ah:function(){return o}});var t=e(7294);const s=t.createContext({});function o(n){const a=t.useContext(s);return t.useMemo((()=>"function"==typeof n?n(a):{...a,...n}),[a,n])}}}]);
//# sourceMappingURL=component---src-pages-posts-mdx-frontmatter-slug-tsx-content-file-path-users-kangseong-workspace-private-blog-posts-2023-231214-nextjs-persist-query-parameters-index-mdx-ed6be02fd8bc2db2dfa3.js.map
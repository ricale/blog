"use strict";(self.webpackChunkricalelog=self.webpackChunkricalelog||[]).push([[2924],{1073:function(n,s,a){var t=a(1151),p=a(7294);function e(n){const s=Object.assign({div:"div",h1:"h1",a:"a",p:"p",ol:"ol",li:"li",h2:"h2",h3:"h3",code:"code",button:"button",ul:"ul",em:"em"},(0,t.ah)(),n.components);return p.createElement(p.Fragment,null,p.createElement(s.div,{className:"md"},p.createElement(s.h1,{id:"1-개요",style:{position:"relative"}},p.createElement(s.a,{href:"#1-%EA%B0%9C%EC%9A%94","aria-label":"1 개요 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"1. 개요"),p.createElement(s.p,null,"이전 글까지는 라인 차트의 ",p.createElement(s.a,{href:"http://localhost:8000/posts/230411-chart-in-react-native-with-d3-1/"},"기본 기능을 구현"),"하고, ",p.createElement(s.a,{href:"http://localhost:8000/posts/230419-chart-in-react-native-with-d3-2/"},"옵션 기능을 구현"),"하고, ",p.createElement(s.a,{href:"http://localhost:8000/posts/230425-chart-in-react-native-with-d3-3/"},"레전드(범례) 기능까지 구현"),"했다."),p.createElement(s.p,null,"오늘은 터치를 통해 특정 아이템을 선택하는 기능을 구현하자."),p.createElement(s.h1,{id:"2-구현",style:{position:"relative"}},p.createElement(s.a,{href:"#2-%EA%B5%AC%ED%98%84","aria-label":"2 구현 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2. 구현"),p.createElement(s.p,null,"요구사항이나 차트 라이브러리에 따라 다르긴 하지만, 보통 차트에서 특정 아이템을 선택하면 아래 하이차트 예제처럼 세 가지 정도가 나타난다."),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/blog/static/55dee7361ee948a3a78178375e6bbd75/cd138/highcharts-example-1.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 67.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+ElEQVR42m1TiW4iMQyd//+1LZSFBaSigiijMncyRzLJ5HgrG5i27Fp6chIfceyXJE1TLBYLrFYr7HY71pvNBvv9nvfr9Zr18XhkTbblconD4fDDXykFIQSSPM+RZRmklHDOYZomhvd+Bp0TgveMyRoE9+UTwk1ba5GM48jOJDFGPITW3/ckIUb4CCgX0dp49wNciGwjSfq+53I5IIQ50QN0RrA+QE2Bg6WJyBWdRYwuzppsySPguaphUBiGgZ9BUGZirZWC6jsgBsT5VZFLpfWPCuO9QjIWosN6s8F2u8Xb2xteXn7hdDqhrCoUZYnJufsLvsAJ6VYawq1H4B4ZDxRS8oR/r1Z4fV3icrkgTS88EKM19Qf/k0RrDa1H9GNA2VpUrcVoPHqlUYsWWSGRlRLtMKJqBnwWAn/ST+zLCmpwkL1FN0ys7eSRUFYfIopWQWgFqTWKdsC16flMjoZRdgqN1hx07Xrsqxy9MRwj1AChNYxzt4RFWUCIBt55mHEEcdMTlWJksoqmYf5ZY1AUBTy1yAdUVYW6qhB8gBQCeZbdEn6ftDYW1+sVdV2jqmsmPfXZ+YiyLNnWdh373kgdZsoRn5OZvHdVNjWO70cewvl85grJx1mDy8cH6KsS6KKGKn8aTvIP/+5/8vnn4Inwj29HwjxVitnyF+A16pv6UxToAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="highcharts example 1"\n        title=""\n        src="/blog/static/55dee7361ee948a3a78178375e6bbd75/0a47e/highcharts-example-1.png"\n        srcset="/blog/static/55dee7361ee948a3a78178375e6bbd75/8a4e8/highcharts-example-1.png 150w,\n/blog/static/55dee7361ee948a3a78178375e6bbd75/5a46d/highcharts-example-1.png 300w,\n/blog/static/55dee7361ee948a3a78178375e6bbd75/0a47e/highcharts-example-1.png 600w,\n/blog/static/55dee7361ee948a3a78178375e6bbd75/1cfc2/highcharts-example-1.png 900w,\n/blog/static/55dee7361ee948a3a78178375e6bbd75/c1b63/highcharts-example-1.png 1200w,\n/blog/static/55dee7361ee948a3a78178375e6bbd75/cd138/highcharts-example-1.png 1220w"\n        sizes="(max-width: 600px) 100vw, 600px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),p.createElement(s.ol,null,"\n",p.createElement(s.li,null,"선택된 아이템들을 표시하는 세로선"),"\n",p.createElement(s.li,null,"시리즈 라인 별로 선택된 아이템을 표시하는 점"),"\n",p.createElement(s.li,null,"선택된 아이템들의 정보를 표시하는 툴팁"),"\n"),p.createElement(s.p,null,"차근차근 구현해보자."),p.createElement(s.h2,{id:"21-터치된-지점에서-제일-가까운-아이템-찾기",style:{position:"relative"}},p.createElement(s.a,{href:"#21-%ED%84%B0%EC%B9%98%EB%90%9C-%EC%A7%80%EC%A0%90%EC%97%90%EC%84%9C-%EC%A0%9C%EC%9D%BC-%EA%B0%80%EA%B9%8C%EC%9A%B4-%EC%95%84%EC%9D%B4%ED%85%9C-%EC%B0%BE%EA%B8%B0","aria-label":"21 터치된 지점에서 제일 가까운 아이템 찾기 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.1. 터치된 지점에서 제일 가까운 아이템 찾기"),p.createElement(s.p,null,"일단 선택된 아이템들을 어떻게 표시할지를 구현하기에 앞서, 터치된 지점의 X 좌표를 갖고 해당 지점과 가장 가까운 아이템을 찾는 로직을 먼저 작성하자."),p.createElement(s.h3,{id:"211-터지된-지점-좌표값-가져오기",style:{position:"relative"}},p.createElement(s.a,{href:"#211-%ED%84%B0%EC%A7%80%EB%90%9C-%EC%A7%80%EC%A0%90-%EC%A2%8C%ED%91%9C%EA%B0%92-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0","aria-label":"211 터지된 지점 좌표값 가져오기 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.1.1. 터지된 지점 좌표값 가져오기"),p.createElement(s.p,null,"터치 이벤트는 ",p.createElement(s.code,null,"<View />"),"의 ",p.createElement(s.code,null,"onTouchStart"),", ",p.createElement(s.code,null,"onTouchMove"),", ",p.createElement(s.code,null,"onTouchEnd")," prop 들로 받아올 수 있다. 해당 이벤트 리스너를 통해 터치 지점의 좌표를 얻을 수 있다."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">function</span> <span class="token function">LineChart</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>View <span class="token comment">/* ... */</span><span class="token operator">></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>chartWrapper<span class="token punctuation">}</span></span>\n<span class="gatsby-highlight-code-line">        <span class="token attr-name">onTouchStart</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">          <span class="token comment">// 터치된 지점의 X 좌표는 아래 값으로 확인할 수 있다.</span></span><span class="gatsby-highlight-code-line">          <span class="token comment">// `onTouchMove`, `onTouchEnd` 도 마찬가지.</span></span><span class="gatsby-highlight-code-line">          evt<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>locationX<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span><span class="token punctuation">}</span></span></span>      <span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Svg</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>height<span class="token punctuation">}</span></span> <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onLayout<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">          </span><span class="token punctuation">{</span>loaded <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>LineChartBody <span class="token comment">/* ... */</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Svg</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span>\n      <span class="token operator">&lt;</span>Legend <span class="token comment">/* ... */</span> <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.h3,{id:"212-좌표값에서-제일-가까운-아이템-가져오기",style:{position:"relative"}},p.createElement(s.a,{href:"#212-%EC%A2%8C%ED%91%9C%EA%B0%92%EC%97%90%EC%84%9C-%EC%A0%9C%EC%9D%BC-%EA%B0%80%EA%B9%8C%EC%9A%B4-%EC%95%84%EC%9D%B4%ED%85%9C-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0","aria-label":"212 좌표값에서 제일 가까운 아이템 가져오기 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.1.2. 좌표값에서 제일 가까운 아이템 가져오기"),p.createElement(s.p,null,"터치 이벤트 리스너를 통해 가져온 좌표값으로 제일 가까운 아이템을 찾는 함수를 작성해보자. 해당 기능은 D3.js 의 ",p.createElement(s.a,{href:"https://github.com/d3/d3-array#bisector"},p.createElement(s.code,null,"bisector")),"를 사용해 구현할 수 있다."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/findItemsByCoord.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> ScaleTime<span class="token punctuation">,</span> bisector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"d3"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> isSameDay <span class="token keyword">from</span> <span class="token string">"utils/isSameDay"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> TimeSeries <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./types"</span><span class="token punctuation">;</span>\n\n<span class="token comment">// `bisector` 는 "좌표값을 받아서 가장 가까운 아이템을 반환하는 함수"를 만들어준다.</span>\n<span class="token keyword">const</span> bisect <span class="token operator">=</span> <span class="token generic-function"><span class="token function">bisector</span><span class="token generic class-name"><span class="token operator">&lt;</span>TimeSeries<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Date<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">=></span> it<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span>center<span class="token punctuation">;</span>\n\n<span class="token keyword">type</span> <span class="token class-name">FindItemsByCoordOptions</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 가까운 아이템을 찾고자 하는 대상 시리즈들</span>\n  series<span class="token operator">:</span> TimeSeries<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token comment">// 차트의 가로 범위</span>\n  range<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token comment">// 좌표값 &lt;-> 날짜값 변환을 위한 스케일 함수</span>\n  scale<span class="token operator">:</span> ScaleTime<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">never</span><span class="token operator">></span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token comment">// 터치된 지점의 X 좌표</span>\n  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">findItemsByCoord</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  series<span class="token punctuation">,</span>\n  range<span class="token punctuation">,</span>\n  scale<span class="token punctuation">,</span>\n  x<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token operator">:</span> FindItemsByCoordOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>series<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>scale<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// `series`를 순회하면서 시리즈별로 가장 가까운 아이템을 찾는다.</span>\n  <span class="token comment">// 찾은 아이템들 중 좌표에 가장 가까운 아이템이 선택된 아이템이 된다.</span>\n\n  <span class="token keyword">let</span> minDistance <span class="token operator">=</span> range<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> range<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">let</span> date<span class="token operator">:</span> Date <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> series<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token function">bisect</span><span class="token punctuation">(</span>series<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span> scale<span class="token punctuation">.</span><span class="token function">invert</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> found <span class="token operator">=</span> series<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>found<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">continue</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">const</span> distance <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span>found<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token operator">-</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>minDistance <span class="token operator">></span> distance<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      minDistance <span class="token operator">=</span> distance<span class="token punctuation">;</span>\n      date <span class="token operator">=</span> found<span class="token punctuation">.</span>date<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// 선택된 아이템이 없다면 `null` 을 반환한다.</span>\n  <span class="token comment">// 모든 시리즈의 `data` 가 비어있지 않은 이상 발생하지 않을 일이긴 하다.</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>date<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// 위에서 찾은 아이템과 같은 날짜의 아이템을 모든 시리즈로부터 찾아서 같이 반환한다.</span>\n  <span class="token comment">// (주의할 점은 이 차트가 일별 차트라는 점을 가정에 둔 코드라는 것이다.</span>\n  <span class="token comment">//  만약 시간까지 세분화된 차트라면 이 코드로는 올바른 값을 구할 수 없다.)</span>\n\n  <span class="token keyword">return</span> series<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sr<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sr<span class="token punctuation">.</span>visible<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">const</span> found <span class="token operator">=</span> sr<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">isSameDay</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>date<span class="token punctuation">,</span> date<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 현재 더미 데이터에는 모든 데이터가 기간안에 일별로 가득 차 있지만</span>\n    <span class="token comment">// 실제 상황에서는 특정 날짜의 데이터가 없을 수도 있다.</span>\n    <span class="token comment">// 그럴 경우에는 아이템을 찾을 수 없으므로 null 을 넣어준다.</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>found<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">// `seriesIndex` 값을 가지고 어떤 시리즈에 속한 아이템인지 구분한다.</span>\n    <span class="token comment">// 해당 시리즈의 속성 (`name`, `color` 등) 을 가져올 때 사용한다.</span>\n    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>found<span class="token punctuation">,</span> seriesIndex<span class="token operator">:</span> i <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> findItemsByCoord<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"이제 ",p.createElement(s.code,null,"<LineChart />")," 에서 선택된 지점의 좌표와 이 함수를 사용해 선택된 아이템을 찾아서 ",p.createElement(s.code,null,"<LineChartBody />")," 에 넘겨주자."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/index.tsx"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">import</span> findItemsByCoord <span class="token keyword">from</span> <span class="token string">"./findItemsByCoord"</span><span class="token punctuation">;</span></span>\n<span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line"><span class="token keyword">type</span> <span class="token class-name">SelectedItem</span> <span class="token operator">=</span> TimeSeriesDatum <span class="token operator">&amp;</span> <span class="token punctuation">{</span> seriesIndex<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>\n<span class="token keyword">function</span> <span class="token function">LineChart</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useImmer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">    selected<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token keyword">as</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token punctuation">(</span>SelectedItem <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 터치 이벤트 리스너.</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> onTouchStart <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useCallback</span><span class="token generic class-name"><span class="token operator">&lt;</span>ViewProps<span class="token punctuation">[</span><span class="token string">"onTouchStart"</span><span class="token punctuation">]</span><span class="token operator">></span></span></span><span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">(</span>touches<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token comment">// 터치가 발생한 지점의 X 좌표로 가장 가까운 아이템이 무엇인지 찾아낸다.</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">const</span> selected <span class="token operator">=</span> <span class="token function">findItemsByCoord</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">        series<span class="token operator">:</span> state<span class="token punctuation">.</span>series<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">        range<span class="token operator">:</span> paneBoundary<span class="token punctuation">.</span>xs<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">        scale<span class="token operator">:</span> xScale<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">        x<span class="token operator">:</span> touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>locationX<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">      <span class="token comment">// 찾아낸 아이템을 state 에 저장한다.</span></span><span class="gatsby-highlight-code-line">      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dr<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">        dr<span class="token punctuation">.</span>selected <span class="token operator">=</span> selected<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">[</span>state<span class="token punctuation">.</span>series<span class="token punctuation">,</span> paneBoundary<span class="token punctuation">]</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="gatsby-highlight-code-line">  <span class="token comment">// `onTouchMove` 도 `onTouchStart` 와 같은 코드를 사용한다.</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> onTouchMove <span class="token operator">=</span> onTouchStart<span class="token punctuation">;</span></span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>View <span class="token comment">/* ... */</span><span class="token operator">></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>chartWrapper<span class="token punctuation">}</span></span>\n<span class="gatsby-highlight-code-line">        <span class="token attr-name">onTouchStart</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onTouchStart<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">        <span class="token attr-name">onTouchMove</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onTouchMove<span class="token punctuation">}</span></span></span>      <span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Svg</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>height<span class="token punctuation">}</span></span> <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onLayout<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">          </span><span class="token punctuation">{</span>loaded <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LineChartBody</span></span>\n              <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">              <span class="token comment">// 저장된 터치 지점을 넘겨준다.</span></span><span class="gatsby-highlight-code-line">              <span class="token attr-name">selected</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>selected<span class="token punctuation">}</span></span></span>            <span class="token punctuation">/></span></span>\n          <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Svg</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span>\n      <span class="token operator">&lt;</span>Legend <span class="token comment">/* ... */</span> <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"이제 터치를 통해 선택된 아이템이 ",p.createElement(s.code,null,"<LineChart />")," 의 ",p.createElement(s.code,null,"state.selected")," 에 저장된다."),p.createElement(s.h2,{id:"22-선택된-아이템들을-표시하는-세로선과-점-구현",style:{position:"relative"}},p.createElement(s.a,{href:"#22-%EC%84%A0%ED%83%9D%EB%90%9C-%EC%95%84%EC%9D%B4%ED%85%9C%EB%93%A4%EC%9D%84-%ED%91%9C%EC%8B%9C%ED%95%98%EB%8A%94-%EC%84%B8%EB%A1%9C%EC%84%A0%EA%B3%BC-%EC%A0%90-%EA%B5%AC%ED%98%84","aria-label":"22 선택된 아이템들을 표시하는 세로선과 점 구현 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.2. 선택된 아이템들을 표시하는 세로선과 점 구현"),p.createElement(s.p,null,"어떤 아이템이 선택되었는지는 알게 되었으니, 선택된 아이템들을 표시할 ",p.createElement(s.code,null,"<Selection />")," 컴포넌트를 구현하자."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/Selection.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> ScaleLinear<span class="token punctuation">,</span> ScaleTime <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"d3"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> Circle<span class="token punctuation">,</span> <span class="token constant">G</span><span class="token punctuation">,</span> Line <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-native-svg"</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> PaneBoundary <span class="token keyword">from</span> <span class="token string">"utils/PaneBoundary"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> getColorWithAlpha <span class="token keyword">from</span> <span class="token string">"utils/getColorWithAlpha"</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token punctuation">{</span> SelectedItem <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types"</span><span class="token punctuation">;</span>\n\n<span class="token keyword">type</span> <span class="token class-name">SelectionProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 선택된 아이템들의 세로선 및 점을 표시하기 위한 scale 함수</span>\n  xScale<span class="token operator">:</span> ScaleTime<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">never</span><span class="token operator">></span><span class="token punctuation">;</span>\n  <span class="token comment">// 선택된 아이템들의 점을 표시하기 위한 scale 함수</span>\n  yScale<span class="token operator">:</span> ScaleLinear<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">never</span><span class="token operator">></span><span class="token punctuation">;</span>\n  <span class="token comment">// 차트의 영역</span>\n  paneBoundary<span class="token operator">:</span> PaneBoundary<span class="token punctuation">;</span>\n  <span class="token comment">// 선택된 아이템들</span>\n  selected<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token punctuation">(</span>SelectedItem <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token comment">// 시리즈별 색상. 선택된 아이템들의 점을 표시할 때 사용된다.</span>\n  colors<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">Selection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  xScale<span class="token punctuation">,</span>\n  yScale<span class="token punctuation">,</span>\n  paneBoundary<span class="token punctuation">,</span>\n  selected<span class="token punctuation">,</span>\n  colors<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token operator">:</span> SelectionProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> firstItem <span class="token operator">=</span> selected<span class="token operator">?.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">!</span><span class="token operator">!</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 선택된 아이템이 없다면 아무것도 출력하지 않는다.</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>firstItem<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token punctuation">{</span><span class="token comment">/* 선택된 아이템들에 세로선을 표시한다. */</span><span class="token punctuation">}</span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Line</span></span>\n        <span class="token attr-name">x1</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">xScale</span><span class="token punctuation">(</span>firstItem<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">x2</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">xScale</span><span class="token punctuation">(</span>firstItem<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">y1</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paneBoundary<span class="token punctuation">.</span>y1<span class="token punctuation">}</span></span>\n        <span class="token attr-name">y2</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paneBoundary<span class="token punctuation">.</span>y2<span class="token punctuation">}</span></span>\n        <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gray<span class="token punctuation">"</span></span>\n      <span class="token punctuation">/></span></span><span class="token plain-text">\n      </span><span class="token punctuation">{</span><span class="token comment">/* 선택된 아이템들의 위치에 점을 표시한다. */</span><span class="token punctuation">}</span><span class="token plain-text">\n      </span><span class="token punctuation">{</span>selected<span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=></span>\n        <span class="token operator">!</span>item <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token punctuation">(</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Circle</span></span>\n            <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>seriesIndex<span class="token punctuation">}</span></span>\n            <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">xScale</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n            <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">yScale</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n            <span class="token attr-name">r</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span></span>\n            <span class="token attr-name">fill</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>colors<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex <span class="token operator">%</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">}</span></span>\n            <span class="token attr-name">stroke</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">getColorWithAlpha</span><span class="token punctuation">(</span>\n              colors<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex <span class="token operator">%</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">,</span>\n              <span class="token number">0.5</span>\n            <span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n            <span class="token attr-name">strokeWidth</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span></span>\n          <span class="token punctuation">/></span></span>\n        <span class="token punctuation">)</span>\n      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> Selection<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"이 ",p.createElement(s.code,null,"<Selection />")," 컴포넌트를 ",p.createElement(s.code,null,"<LineChartBody />")," 에서 사용해주면 된다."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/index.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n\n<span class="token keyword">type</span> <span class="token class-name">LineChartBodyProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">  selected<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token punctuation">(</span>SelectedItem <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">LineChartBody</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">  selected<span class="token punctuation">,</span></span><span class="token punctuation">}</span><span class="token operator">:</span> LineChartBodyProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      &lt;XAxis /* ... */ /></span>\n<span class="token plain-text">      &lt;YAxis /* ... */ /></span>\n<span class="token plain-text">      &lt;Lines /* ... */ /></span>\n<span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Selection</span></span></span><span class="gatsby-highlight-code-line">        <span class="token attr-name">xScale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>xScale<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">        <span class="token attr-name">yScale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>yScale<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">        <span class="token attr-name">paneBoundary</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paneBoundary<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">        <span class="token attr-name">selected</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">        <span class="token attr-name">colors</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>linesOptions<span class="token operator">?.</span>colors <span class="token operator">??</span> <span class="token constant">DEFAULT_COLORS</span><span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">/></span></span><span class="token plain-text"></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> LineChartBody<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"이제 차트를 터치하면 터지한 지점과 가장 가까운 아이템이 점과 세로선으로 표시되는 것을 확인할 수 있다."),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/blog/static/cd74deffc0c5fee4de64d971b390af73/47311/selection-1.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 62%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHYsLGEh//EABgQAAIDAAAAAAAAAAAAAAAAAAABECEx/9oACAEBAAEFAkXDFp//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAADAQEBAAAAAAAAAAAAAAAAASERQYH/2gAIAQEAAT8hd4+08FEjZWRLD//aAAwDAQACAAMAAAAQE8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAeEAEAAgEEAwAAAAAAAAAAAAABABEhMUFRYXGRsf/aAAgBAQABPxAABa2r3FuY92Dv16hhVt24jTThL+wRRnzP/9k=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="selection 1"\n        title=""\n        src="/blog/static/cd74deffc0c5fee4de64d971b390af73/b4294/selection-1.jpg"\n        srcset="/blog/static/cd74deffc0c5fee4de64d971b390af73/75985/selection-1.jpg 150w,\n/blog/static/cd74deffc0c5fee4de64d971b390af73/f93b5/selection-1.jpg 300w,\n/blog/static/cd74deffc0c5fee4de64d971b390af73/b4294/selection-1.jpg 600w,\n/blog/static/cd74deffc0c5fee4de64d971b390af73/8e1fc/selection-1.jpg 900w,\n/blog/static/cd74deffc0c5fee4de64d971b390af73/47311/selection-1.jpg 1080w"\n        sizes="(max-width: 600px) 100vw, 600px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),p.createElement(s.h2,{id:"23-선택된-아이템들의-정보를-표시하는-툴팁-구현",style:{position:"relative"}},p.createElement(s.a,{href:"#23-%EC%84%A0%ED%83%9D%EB%90%9C-%EC%95%84%EC%9D%B4%ED%85%9C%EB%93%A4%EC%9D%98-%EC%A0%95%EB%B3%B4%EB%A5%BC-%ED%91%9C%EC%8B%9C%ED%95%98%EB%8A%94-%ED%88%B4%ED%8C%81-%EA%B5%AC%ED%98%84","aria-label":"23 선택된 아이템들의 정보를 표시하는 툴팁 구현 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.3. 선택된 아이템들의 정보를 표시하는 툴팁 구현"),p.createElement(s.p,null,"터치된 지점이 세로선과 점으로 강조되는 것은 매우 좋지만, 해당 지점의 정보를 볼 수 없으니 정확히 어떤 점을 선택했는지 알기 어렵다. 터지한 지점의 정보를 보여주는 툴팁을 구현하자."),p.createElement(s.h3,{id:"231-selection--컴포넌트-분리",style:{position:"relative"}},p.createElement(s.a,{href:"#231-selection--%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EB%B6%84%EB%A6%AC","aria-label":"231 selection  컴포넌트 분리 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.3.1. ",p.createElement(s.code,null,"<Selection />")," 컴포넌트 분리"),p.createElement(s.p,null,"일단 ",p.createElement(s.code,null,"<Selection />")," 컴포넌트를 수정하자."),p.createElement(s.p,null,"본래는 여기에 툴팁 기능까지 같이 구현할 생각이었지만, 가독성 및 확장성을 위해 컴포넌트를 나누도록 하겠다. 세로선을 그린 ",p.createElement(s.code,null,"<Line />")," 은 그대로 두고 점들을 그린 ",p.createElement(s.code,null,"items.map()")," 구문은 ",p.createElement(s.code,null,"<Dots />")," 컴포넌트로 분리할 것이며 툴팁 또한 ",p.createElement(s.code,null,"<Tooltip />")," 컴포넌트를 만들어 따로 구현할 것이다. 그러면 아래와 같은 형태가 될 것이다."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/Selection/index.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n\n<span class="token keyword">function</span> <span class="token function">Selection</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token punctuation">{</span>lineWidth <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Line</span></span>\n            <span class="token attr-name">x1</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span></span>\n            <span class="token attr-name">x2</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span></span>\n            <span class="token attr-name">y1</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paneBoundary<span class="token punctuation">.</span>y1<span class="token punctuation">}</span></span>\n            <span class="token attr-name">y2</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paneBoundary<span class="token punctuation">.</span>y2<span class="token punctuation">}</span></span>\n            <span class="token attr-name">stroke</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>lineColor<span class="token punctuation">}</span></span>\n            <span class="token attr-name">strokeWidth</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>lineWidth<span class="token punctuation">}</span></span>\n          <span class="token punctuation">/></span></span>\n        <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="gatsby-highlight-code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Dots</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">items</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">xScale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>xScale<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">yScale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>yScale<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">colors</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>colors<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">        <span class="token punctuation">/></span></span><span class="token plain-text"></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tooltip</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,p.createElement(s.code,null,"<Dots />")," 는 아래와 같다. 이전에 ",p.createElement(s.code,null,"<Selection />")," 에 있던 내용 중 일부를 그대로 옮겨 간 코드다."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/Selection/Dots.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> Circle<span class="token punctuation">,</span> <span class="token constant">G</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-native-svg"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> ScaleLinear<span class="token punctuation">,</span> ScaleTime <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"d3"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> getColorWithAlpha <span class="token keyword">from</span> <span class="token string">"utils/getColorWithAlpha"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> SelectedItem <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types"</span><span class="token punctuation">;</span>\n\n<span class="token keyword">type</span> <span class="token class-name">DotsProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  items<span class="token operator">:</span> SelectedItem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  xScale<span class="token operator">:</span> ScaleTime<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">never</span><span class="token operator">></span><span class="token punctuation">;</span>\n  yScale<span class="token operator">:</span> ScaleLinear<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">never</span><span class="token operator">></span><span class="token punctuation">;</span>\n  colors<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">Dots</span><span class="token punctuation">(</span><span class="token punctuation">{</span> items<span class="token punctuation">,</span> xScale<span class="token punctuation">,</span> yScale<span class="token punctuation">,</span> colors <span class="token punctuation">}</span><span class="token operator">:</span> DotsProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Circle</span></span>\n          <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>seriesIndex<span class="token punctuation">}</span></span>\n          <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">xScale</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n          <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">yScale</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n          <span class="token attr-name">r</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span></span>\n          <span class="token attr-name">fill</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>colors<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex <span class="token operator">%</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">}</span></span>\n          <span class="token attr-name">stroke</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">getColorWithAlpha</span><span class="token punctuation">(</span>\n            colors<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex <span class="token operator">%</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">,</span>\n            <span class="token number">0.5</span>\n          <span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n          <span class="token attr-name">strokeWidth</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span></span>\n        <span class="token punctuation">/></span></span>\n      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> Dots<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.h3,{id:"232-tooltip--구현",style:{position:"relative"}},p.createElement(s.a,{href:"#232-tooltip--%EA%B5%AC%ED%98%84","aria-label":"232 tooltip  구현 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.3.2. ",p.createElement(s.code,null,"<Tooltip />")," 구현"),p.createElement(s.p,null,p.createElement(s.code,null,"<Tooltip />")," 컴포넌트도 구현해보자. 이 컴포넌트에 들어갈 내용은"),p.createElement(s.ul,null,"\n",p.createElement(s.li,null,"X 축 정보"),"\n",p.createElement(s.li,null,"각 점의 시리즈 이름과 값"),"\n"),p.createElement(s.p,null,"정도가 있다. 해당 정보를 출력하자."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/Selection/Tooltip.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> Circle<span class="token punctuation">,</span> <span class="token constant">G</span><span class="token punctuation">,</span> GProps<span class="token punctuation">,</span> TSpan<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-native-svg"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> SelectedItem<span class="token punctuation">,</span> TimeSeries <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types"</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">TooltipProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 선택된 아이템들</span>\n  items<span class="token operator">:</span> SelectedItem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token comment">// 시리즈들. 아이템의 시리즈 이름을 표시하기 위해 가져왔다.</span>\n  series<span class="token operator">:</span> TimeSeries<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token comment">// 색상들. 아이템의 색상을 적용하기 위해 가져왔다.</span>\n  colors<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">Tooltip</span><span class="token punctuation">(</span><span class="token punctuation">{</span> items<span class="token punctuation">,</span> series<span class="token punctuation">,</span> colors <span class="token punctuation">}</span><span class="token operator">:</span> TooltipProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token punctuation">{</span><span class="token comment">/* Y 축 정보를 출력한다. */</span><span class="token punctuation">}</span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span> <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span> <span class="token attr-name">alignmentBaseline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hanging<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token function">dateFormat</span><span class="token punctuation">(</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token punctuation">{</span><span class="token comment">/*\n        `items` 를 선회하면서 각 아이템의 정보를 출력한다.\n        시리즈의 이름과 색상이 필요하므로 `series` 와 `colors` 도 받아와서 사용하고 있다.\n      */</span><span class="token punctuation">}</span><span class="token plain-text">\n      </span><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>seriesIndex<span class="token punctuation">}</span></span> <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>i <span class="token operator">*</span> <span class="token number">14</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Circle</span></span>\n            <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span></span>\n            <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">}</span></span>\n            <span class="token attr-name">r</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span></span>\n            <span class="token attr-name">fill</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>colors<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex <span class="token operator">%</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">}</span></span>\n          <span class="token punctuation">/></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span> <span class="token attr-name">dx</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">8</span><span class="token punctuation">}</span></span> <span class="token attr-name">alignmentBaseline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hanging<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TSpan</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>series<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TSpan</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TSpan</span></span> <span class="token attr-name">dx</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">}</span></span> <span class="token attr-name">fontWeight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>600<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n              </span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TSpan</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span>\n      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> Tooltip<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"또한 툴팁은 하얀 배경과 회색 테두리를 갖게 될텐데, 툴팁의 내용에 따라 해당 배경 및 테두리의 너비/높이가 바뀌어야 하므로 해당 구현도 필요하다."),p.createElement(s.p,null,"그냥 툴팁의 컨텐츠의 컨테이너인 ",p.createElement(s.code,null,"<G />")," 에 배경색(",p.createElement(s.code,null,"fill"),") 및 테두리(",p.createElement(s.code,null,"stroke*"),") 속성을 지정해서 적용하고 싶지만 그렇게는 할 수 없다. ",p.createElement(s.code,null,"<G />")," 컴포넌트는 SVG 에서 다른 컴포넌트들을 그룹핑하기 위해서 쓰이는 컴포넌트로 ",p.createElement(s.em,null,"스타일을 지정할 수 없기 때문"),"이다. ",p.createElement(s.code,null,"<G />")," 에게 스타일 속성을 지정하면 해당 컴포넌트의 자식 컴포넌트들에게만 영향이 갈 뿐 본인에게는 어떠한 스타일도 적용되지 않는다. (이는 웹에서도 동일하다.)"),p.createElement(s.p,null,"그러니 우리는 ",p.createElement(s.code,null,"onLayout")," 리스너를 통해 ",p.createElement(s.code,null,"<G />")," 의 크기를 알아낸 다음, 해당 크기와 동일한 ",p.createElement(s.code,null,"<Rect />")," 를 그려서 배경 및 테두리를 구현할 것이다."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/Selection/Tooltip.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> Rect <span class="token comment">/* ... */</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-native-svg"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> useImmer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"use-immer"</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ...</span>\n\n<span class="token keyword">function</span> <span class="token function">Tooltip</span><span class="token punctuation">(</span><span class="token punctuation">{</span> items<span class="token punctuation">,</span> series<span class="token punctuation">,</span> colors <span class="token punctuation">}</span><span class="token operator">:</span> TooltipProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useImmer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    width<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    height<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 컨텐츠 영역 (Y 축 정보, 각 점의 이름과 값 정보 영역) 의 컨테이너인 `&lt;G />` 의 크기를 얻기 위한 리스너</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> onContentLayout<span class="token operator">:</span> GProps<span class="token punctuation">[</span><span class="token string">"onLayout"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> layout <span class="token punctuation">}</span> <span class="token operator">=</span> evt<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">const</span> newWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>layout<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">const</span> newHeight <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>layout<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>width <span class="token operator">===</span> newWidth <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">.</span>height <span class="token operator">===</span> newHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">return</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dr<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      dr<span class="token punctuation">.</span>width <span class="token operator">=</span> newWidth<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">      dr<span class="token punctuation">.</span>height <span class="token operator">=</span> newHeight<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>\n  <span class="token keyword">const</span> loaded <span class="token operator">=</span> state<span class="token punctuation">.</span>width <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">.</span>height <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n<span class="gatsby-highlight-code-line">    <span class="token comment">// 컨텐츠 영역의 크기가 측정되어서 배경을 그리기 전까지는</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">// opacity 를 0 으로 해서 보여주지 않는다.</span></span><span class="gatsby-highlight-code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span> <span class="token attr-name">opacity</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>loaded <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">      </span><span class="token punctuation">{</span>loaded <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>\n<span class="gatsby-highlight-code-line">        <span class="token comment">// 컨텐츠 영역의 너비/높이가 측정되었다면 &lt;Rect /> 로 배경색과 테두리를 그린다.</span></span><span class="gatsby-highlight-code-line">        <span class="token comment">// `+ 20` 은 좌우 여백을 위한 값이다.</span></span><span class="gatsby-highlight-code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Rect</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">width</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>white<span class="token punctuation">"</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>darkgray<span class="token punctuation">"</span></span></span><span class="gatsby-highlight-code-line">        <span class="token punctuation">/></span></span></span>      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span> <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span></span> <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span></span> <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onContentLayout<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span> <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span> <span class="token attr-name">alignmentBaseline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hanging<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token function">dateFormat</span><span class="token punctuation">(</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n          <span class="token comment">// ...</span>\n        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> Tooltip<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"마지막으로 ",p.createElement(s.code,null,"<LineChartBody />"),"에서 ",p.createElement(s.code,null,"<Selection />")," 을 통해 ",p.createElement(s.code,null,"<Tooltip />")," 에까지 ",p.createElement(s.code,null,"series")," 를 건내주도록 수정하자."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/index.tsx"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n\n<span class="token keyword">function</span> <span class="token function">LineChartBody</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      &lt;XAxis /* ... */ /></span>\n<span class="token plain-text">      &lt;YAxis /* ... */ /></span>\n<span class="token plain-text">      &lt;Lines /* ... */ /></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Selection</span></span>\n        <span class="token attr-name">xScale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>xScale<span class="token punctuation">}</span></span>\n        <span class="token attr-name">yScale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>yScale<span class="token punctuation">}</span></span>\n        <span class="token attr-name">paneBoundary</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paneBoundary<span class="token punctuation">}</span></span>\n        <span class="token attr-name">selected</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span></span>\n        <span class="token attr-name">colors</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>linesOptions<span class="token operator">?.</span>colors <span class="token operator">??</span> <span class="token constant">DEFAULT_COLORS</span><span class="token punctuation">}</span></span>\n<span class="gatsby-highlight-code-line">        <span class="token attr-name">series</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>series<span class="token punctuation">}</span></span> <span class="token comment">// &lt;- series 를 추가했다.</span></span>      <span class="token punctuation">/></span></span><span class="token plain-text"></span>\n<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> LineChartBody<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/Selection/index.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n\n<span class="token keyword">type</span> <span class="token class-name">SelectionProps</span> <span class="token operator">=</span> SelectionOptions <span class="token operator">&amp;</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">  series<span class="token operator">:</span> TimeSeries<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">Selection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">  series<span class="token punctuation">,</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tooltip</span></span> <span class="token attr-name">items</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span></span> <span class="token attr-name">series</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>series<span class="token punctuation">}</span></span> <span class="token attr-name">colors</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>colors<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.h3,{id:"233-툴팁의-위치를-동적으로-변경",style:{position:"relative"}},p.createElement(s.a,{href:"#233-%ED%88%B4%ED%8C%81%EC%9D%98-%EC%9C%84%EC%B9%98%EB%A5%BC-%EB%8F%99%EC%A0%81%EC%9C%BC%EB%A1%9C-%EB%B3%80%EA%B2%BD","aria-label":"233 툴팁의 위치를 동적으로 변경 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.3.3. 툴팁의 위치를 동적으로 변경"),p.createElement(s.p,null,"툴팁의 배경까지 그렸지만 아직 조금 부족하다. 왜냐하면 이대로라면 이 툴팁은 (0, 0) 좌표에 고정되어 있을 것이기 때문이다. 선택된 아이템을 위한 툴팁이라면 선택된 아이템의 세로선 및 점 옆에 따라다니는 것이 더 자연스럽다. 위치도 동적으로 바꿀 수 있도록 조금만 더 고쳐보자."),p.createElement(s.p,null,"먼저 ",p.createElement(s.code,null,"<Tooltip />")," 에서 크기 정보를 부모에게 올려줄 수 있도록 ",p.createElement(s.code,null,"onLayout")," prop 을 추가하자."),p.createElement(s.p,null,p.createElement(s.code,null,"<Tooltip />")," 의 크기를 부모에게 올려주는 이유는 부모가 툴팁의 위치를 계산할 때 해당 값이 필요하기 때문이다."),p.createElement(s.p,null,"툴팁의 위치는 툴팁 자신의 크기에 따라 바뀔 수 있다. 예를 들어 본래라면 선택된 아이템 세로선의 오른쪽에 툴팁이 그려져야 하는데 세로선 오른쪽의 공간이 툴팁의 너비보다 좁다면, 툴팁을 세로선 왼쪽에 그리는 것이 자연스러울 것이다."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/Selection/Tooltip.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n\n<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">TooltipProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 이 컴포넌트의 위치를 지정할 수 있도록 제공하는 props</span></span><span class="gatsby-highlight-code-line">  x<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  y<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 부모에게 제공할 `onLayout` 이벤트 핸들러</span></span><span class="gatsby-highlight-code-line">  onLayout<span class="token operator">?</span><span class="token operator">:</span> GProps<span class="token punctuation">[</span><span class="token string">"onLayout"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">function</span> <span class="token function">Tooltip</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> onLayout<span class="token operator">:</span> _onLayout <span class="token punctuation">}</span><span class="token operator">:</span> TooltipProps<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>  <span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> onLayout<span class="token operator">:</span> GProps<span class="token punctuation">[</span><span class="token string">"onLayout"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> layout <span class="token punctuation">}</span> <span class="token operator">=</span> evt<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>layout<span class="token punctuation">.</span>width <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> layout<span class="token punctuation">.</span>height <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">return</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">// 부모에게 onLayout 이벤트를 그대로 올려준다.</span></span><span class="gatsby-highlight-code-line">    _onLayout<span class="token operator">?.</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>\n  <span class="token comment">// ...</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n<span class="gatsby-highlight-code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span> <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span></span> <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>y<span class="token punctuation">}</span></span> <span class="token attr-name">opacity</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>loaded <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">      </span><span class="token punctuation">{</span>loaded <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Rect</span></span>\n          <span class="token attr-name">width</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">}</span></span>\n          <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">}</span></span>\n          <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>white<span class="token punctuation">"</span></span>\n          <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>darkgray<span class="token punctuation">"</span></span>\n<span class="gatsby-highlight-code-line">          <span class="token comment">// 최상단 컴포넌트에 `onLayout` 을 넣지 않고 여기 배경 컴포넌트에 넣어둔 이유는</span></span><span class="gatsby-highlight-code-line">          <span class="token comment">// 1. 이 컴포넌트의 크기가 `&lt;Tooltip />` 컴포넌트의 크기와 동일하고</span></span><span class="gatsby-highlight-code-line">          <span class="token comment">// 2. 이 컴포넌트가 그려진 순간이 `&lt;Tooltip />` 의 초기화가 끝난 순간이기 때문이다.</span></span><span class="gatsby-highlight-code-line">          <span class="token comment">// 만약 최상단 컴포넌트에 `onLayout` 을 넣었다면</span></span><span class="gatsby-highlight-code-line">          <span class="token comment">// 컨텐츠 영역만 그려졌을 때 한 번, 배경까지 그려졌을 때 한 번,</span></span><span class="gatsby-highlight-code-line">          <span class="token comment">// 이렇게 최소한 두 번 `onLayout` 이 호출되기 때문에 비효율적이다.</span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onLayout<span class="token punctuation">}</span></span></span>        <span class="token punctuation">/></span></span>\n      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span> <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span></span> <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span></span> <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onContentLayout<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> Tooltip<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"이제 ",p.createElement(s.code,null,"<Tooltip />")," 의 부모인 ",p.createElement(s.code,null,"<Selection />")," 에서 툴팁의 위치를 계산하자."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/Selection/index.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n\n<span class="token keyword">function</span> <span class="token function">Selection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  xScale<span class="token punctuation">,</span>\n  yScale<span class="token punctuation">,</span>\n  paneBoundary<span class="token punctuation">,</span>\n  selected<span class="token punctuation">,</span>\n  colors<span class="token punctuation">,</span>\n  series<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token operator">:</span> SelectionProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useImmer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">    tooltip<span class="token operator">:</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      width<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">      height<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 선택된 아이템들의 X 좌표를 계산한다.</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> firstItem <span class="token operator">=</span> selected<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">!</span><span class="token operator">!</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> x <span class="token operator">=</span> firstItem <span class="token operator">&amp;&amp;</span> <span class="token function">xScale</span><span class="token punctuation">(</span>firstItem<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="gatsby-highlight-code-line">  <span class="token comment">// `&lt;Tooltip />` 의 `onLayout` prop 을 통해 툴팁의 크기를 가져온다.</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> onTooltipLayout<span class="token operator">:</span> TooltipProps<span class="token punctuation">[</span><span class="token string">"onLayout"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> layout <span class="token punctuation">}</span> <span class="token operator">=</span> evt<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">const</span> newWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>layout<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">const</span> newHeight <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>layout<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">      state<span class="token punctuation">.</span>tooltip<span class="token punctuation">.</span>width <span class="token operator">===</span> newWidth <span class="token operator">&amp;&amp;</span></span><span class="gatsby-highlight-code-line">      state<span class="token punctuation">.</span>tooltip<span class="token punctuation">.</span>height <span class="token operator">===</span> newHeight</span><span class="gatsby-highlight-code-line">    <span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">return</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dr<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      dr<span class="token punctuation">.</span>tooltip<span class="token punctuation">.</span>width <span class="token operator">=</span> newWidth<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">      dr<span class="token punctuation">.</span>tooltip<span class="token punctuation">.</span>height <span class="token operator">=</span> newHeight<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 선택된 아이템들의 X 좌표와 툴팁의 크기를 가지고 툴팁의 X 좌표를 계산한다.</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 1. 툴팁의 너비가 0이면 아직 로딩 전이라는 뜻이므로</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">//    그냥 안 보이게 먼 곳(-1000)으로 보내버린다.</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 2. 선택된 X 좌표 오른쪽 공간의 너비가 툴팁이 너비보다 넓으면 (공간이 충분하면)</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">//    툴팁을 해당 좌표 오른쪽에 출력한다.</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 3. 선택된 X 좌표 오른쪽 공간의 너비가 툴팁의 너비보다 좁으면 (공간이 부족하면)</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">//    툴팁을 해당 좌표 왼쪽에 출력한다.</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> tooltipX <span class="token operator">=</span></span><span class="gatsby-highlight-code-line">    state<span class="token punctuation">.</span>tooltip<span class="token punctuation">.</span>width <span class="token operator">===</span> <span class="token number">0</span></span><span class="gatsby-highlight-code-line">      <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1000</span></span><span class="gatsby-highlight-code-line">      <span class="token operator">:</span> paneBoundary<span class="token punctuation">.</span>x2 <span class="token operator">-</span> state<span class="token punctuation">.</span>tooltip<span class="token punctuation">.</span>width <span class="token operator">></span> x <span class="token operator">+</span> <span class="token number">10</span></span><span class="gatsby-highlight-code-line">      <span class="token operator">?</span> x <span class="token operator">+</span> <span class="token number">10</span></span><span class="gatsby-highlight-code-line">      <span class="token operator">:</span> x <span class="token operator">-</span> state<span class="token punctuation">.</span>tooltip<span class="token punctuation">.</span>width <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">;</span></span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tooltip</span></span>\n        <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">        <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>tooltipX<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">        <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paneBoundary<span class="token punctuation">.</span>y2<span class="token punctuation">}</span></span> <span class="token comment">// Y 좌표는 차트 영역 최상단으로 고정</span></span><span class="gatsby-highlight-code-line">        <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onTooltipLayout<span class="token punctuation">}</span></span></span>      <span class="token punctuation">/></span></span><span class="token plain-text"></span>\n<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"이제 툴팁이 선택된 아이템들을 따라다니는 것을 확인할 수 있다."),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/blog/static/3f514d19297d46892039ded22d9101c7/47311/selection-2-1.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 61.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHXuLGEh//EABgQAAIDAAAAAAAAAAAAAAAAAAABECEx/9oACAEBAAEFAkXDFp//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAADAQADAAAAAAAAAAAAAAAAAREhMWHB/9oACAEBAAE/IajXbOC9NExs1IlD/9oADAMBAAIAAwAAABCDz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQVFhcbH/2gAIAQEAAT8QaAK7OoY1C8qg89+IYFb6xiNNOEv7BFb9z//Z\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="selection 2 1"\n        title=""\n        src="/blog/static/3f514d19297d46892039ded22d9101c7/b4294/selection-2-1.jpg"\n        srcset="/blog/static/3f514d19297d46892039ded22d9101c7/75985/selection-2-1.jpg 150w,\n/blog/static/3f514d19297d46892039ded22d9101c7/f93b5/selection-2-1.jpg 300w,\n/blog/static/3f514d19297d46892039ded22d9101c7/b4294/selection-2-1.jpg 600w,\n/blog/static/3f514d19297d46892039ded22d9101c7/8e1fc/selection-2-1.jpg 900w,\n/blog/static/3f514d19297d46892039ded22d9101c7/47311/selection-2-1.jpg 1080w"\n        sizes="(max-width: 600px) 100vw, 600px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/blog/static/5bc897a46cc2d955aa4e6e89699fd4a9/47311/selection-2-2.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 61.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdhuZQYf/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEQITH/2gAIAQEAAQUCRcMWn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAQEBAQEBAAAAAAAAAAAAAAEAESFBUf/aAAgBAQABPyFuPvZ+LusMFuswBf/aAAwDAQACAAMAAAAQQ8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhQTFRsXH/2gAIAQEAAT8QAAKt7MYikdMvYq8Qw1vrqNNOEv2CVz9n/9k=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="selection 2 2"\n        title=""\n        src="/blog/static/5bc897a46cc2d955aa4e6e89699fd4a9/b4294/selection-2-2.jpg"\n        srcset="/blog/static/5bc897a46cc2d955aa4e6e89699fd4a9/75985/selection-2-2.jpg 150w,\n/blog/static/5bc897a46cc2d955aa4e6e89699fd4a9/f93b5/selection-2-2.jpg 300w,\n/blog/static/5bc897a46cc2d955aa4e6e89699fd4a9/b4294/selection-2-2.jpg 600w,\n/blog/static/5bc897a46cc2d955aa4e6e89699fd4a9/8e1fc/selection-2-2.jpg 900w,\n/blog/static/5bc897a46cc2d955aa4e6e89699fd4a9/47311/selection-2-2.jpg 1080w"\n        sizes="(max-width: 600px) 100vw, 600px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),p.createElement(s.h2,{id:"24-선택-취소하기",style:{position:"relative"}},p.createElement(s.a,{href:"#24-%EC%84%A0%ED%83%9D-%EC%B7%A8%EC%86%8C%ED%95%98%EA%B8%B0","aria-label":"24 선택 취소하기 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.4. 선택 취소하기"),p.createElement(s.p,null,"여기까지 구현해서 사용해보면 한 가지 불편한 사항이 있다. 바로 아이템 선택을 취소하고 싶은데 취소할 방법이 없다는 것이다. 차트에서 선택을 취소하게끔 하려면 아래 방법들을 제공할 수 있을 것이다."),p.createElement(s.ol,null,"\n",p.createElement(s.li,null,"차트 바깥 부분을 터치"),"\n",p.createElement(s.li,null,"선택을 취소하는 기능의 버튼 등을 별도로 제공"),"\n",p.createElement(s.li,null,"아이템이 선택된 차트를 아주 짧게 터치"),"\n",p.createElement(s.li,null,"애시당초 터치하고 있을 때만 선택할 수 있도록 (터치를 떼는 순간 선택이 취소되도록) 구현"),"\n"),p.createElement(s.p,null,"어느 방법이든 선택의 차이일 뿐 불가능하지 않다. (다만 1번 방법 같은 경우, 웹에서는 구현이 쉽지만 RN 에서는 매끄럽게 구현하기 어렵다.)"),p.createElement(s.p,null,"이 글에서는 3번 방법을 선택하도록 하겠다. (만약 다른 방법이 더 마음에 든다면 다른 방법으로 구현해도 문제 없다.) 3번 방법을 좀 더 자세히 정리하자면 아래와 같다."),p.createElement(s.ul,null,"\n",p.createElement(s.li,null,"아이템이 선택되지 않은 상태: 차트를 터치하면 터치된 지점의 가까운 아이템이 선택됨"),"\n",p.createElement(s.li,null,"아이템이 선택된 상태:","\n",p.createElement(s.ul,null,"\n",p.createElement(s.li,null,"차트를 아주 짧게 터치하면 선택이 취소됨"),"\n",p.createElement(s.li,null,"차트를 일정 시간 이상 길게 터치하면 터치된 지점의 가까운 아이템이 선택됨"),"\n"),"\n"),"\n"),p.createElement(s.h3,{id:"241-ontouchstart-ontouchmove-ontouchend-각각-구현",style:{position:"relative"}},p.createElement(s.a,{href:"#241-ontouchstart-ontouchmove-ontouchend-%EA%B0%81%EA%B0%81-%EA%B5%AC%ED%98%84","aria-label":"241 ontouchstart ontouchmove ontouchend 각각 구현 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.4.1. ",p.createElement(s.code,null,"onTouchStart"),", ",p.createElement(s.code,null,"onTouchMove"),", ",p.createElement(s.code,null,"onTouchEnd")," 각각 구현"),p.createElement(s.p,null,"2.1.2. 에서는 ",p.createElement(s.code,null,"onTouchStart")," 와 ",p.createElement(s.code,null,"onTouchMove")," 에 같은 리스너를 지정하고 ",p.createElement(s.code,null,"onTouchEnd")," 에는 아무 리스너도 지정하지 않았다. 하지만 위에서 언급한 요구사항에 만족하기 위해서는 세 리스너를 모두 각각 구현해야 한다."),p.createElement(s.p,null,"이 리스너들과 가까운 아이템을 찾는 로직을 모두 ",p.createElement(s.code,null,"<LineChart />")," 에 구현하면 코드가 정신없어질 것 같으니 코드를 분리하도록 하겠다."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/index.tsx"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line"><span class="token keyword">import</span> useSelectionByTouch <span class="token keyword">from</span> <span class="token string">"./useSelectionByTouch"</span><span class="token punctuation">;</span></span>\n<span class="token keyword">function</span> <span class="token function">LineChart</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// - 2.1.2. 에서 구현한 `onTouchStart`와 `state.selected` 는 모두</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">//   `useSelectionByTouch` 로 이동할 것이므로 이 파일에서는 삭제된다.</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">// - `touchCallbacks` 에 `onTouchStart`, `onTouchMove`, `onTouchEnd` 가 모두 포함되어있다.</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>selected<span class="token punctuation">,</span> touchCallbacks<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useSelectionByTouch</span><span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">    state<span class="token punctuation">.</span>series<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    xScale<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    paneBoundary</span><span class="gatsby-highlight-code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  <span class="token comment">// ...</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>View <span class="token comment">/* ... */</span><span class="token operator">></span>\n<span class="gatsby-highlight-code-line">      <span class="token punctuation">{</span><span class="token comment">/* `touchCallbacks` 를 여기에 적용한다. */</span><span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>chartWrapper<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>touchCallbacks<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Svg</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>height<span class="token punctuation">}</span></span> <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onLayout<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">          </span><span class="token punctuation">{</span>loaded <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LineChartBody</span></span>\n              <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">              <span class="token comment">// `useSelectionByTouch` 에서 받아온 선택된 아이템(`selected`)은 여기에 전달한다.</span></span><span class="gatsby-highlight-code-line">              <span class="token attr-name">selected</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span></span></span>            <span class="token punctuation">/></span></span>\n          <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Svg</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span>\n      <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"그러면 ",p.createElement(s.code,null,"useSelectionByTouch")," 도 구현하자."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/useSelectionByTouch.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n<span class="token comment">// 처음 나오는 `useSelectionByTouch.ts` 코드 전문이지만</span>\n<span class="token comment">// 코드가 길어져서 import 문 및 타입 지정은 생략한다.</span>\n\n<span class="token keyword">const</span> <span class="token constant">MIN_TOUCH_DURATION</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">useSelectionByTouch</span><span class="token punctuation">(</span>\n  series<span class="token operator">:</span> TimeSeries<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  xScale<span class="token operator">:</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> getTimeScale<span class="token operator">></span><span class="token punctuation">,</span>\n  paneBoundary<span class="token operator">:</span> PaneBoundary\n<span class="token punctuation">)</span><span class="token operator">:</span> UseSelectionByTouchReturns <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> touchRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token comment">// 터치가 되었는지 (그래서 선택된 아이템이 있는지) 여부를 저장한다.</span>\n    touched<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token comment">// `onTouchStart` 이벤트 발생 시점을 저장한다.</span>\n    <span class="token comment">// 이 값은 짧은 터치를 했는지 구분할 때 쓰인다.</span>\n    touchStartTimestamp<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useImmer</span><span class="token generic class-name"><span class="token operator">&lt;</span>UseSelectionByTouchState<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token comment">// 선택된 아이템이 있을 경우, 터치된 지점도 같이 저장한다.</span>\n    touchedX<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    <span class="token comment">// 선택된 아이템들을 저장한다.</span>\n    selected<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// `series` 가 바뀔 경우 저장된 좌표를 기반으로 선택된 아이템을 다시 계산한다.</span>\n  <span class="token comment">// `&lt;Legend />` 의 특정 시리즈 비활성홬 기능을 염두에 둔 코드다.</span>\n  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>touchRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>touched<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> selected <span class="token operator">=</span> <span class="token function">findItemsByCoord</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        series<span class="token operator">:</span> series<span class="token punctuation">,</span>\n        range<span class="token operator">:</span> paneBoundary<span class="token punctuation">.</span>xs<span class="token punctuation">,</span>\n        scale<span class="token operator">:</span> xScale<span class="token punctuation">,</span>\n        x<span class="token operator">:</span> state<span class="token punctuation">.</span>touchedX<span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dr<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        dr<span class="token punctuation">.</span>selected <span class="token operator">=</span> selected<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>series<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">const</span> onTouchStart <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useCallback</span><span class="token generic class-name"><span class="token operator">&lt;</span>OnTouchStart<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token comment">// 터치가 시작되면 터치 시작 시간을 `touchRef` 에 저장해둔다.</span>\n    touchRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>touchStartTimestamp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">const</span> onTouchMove <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useCallback</span><span class="token generic class-name"><span class="token operator">&lt;</span>OnTouchMove<span class="token operator">></span></span></span><span class="token punctuation">(</span>\n    <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token comment">// 이미 선택된 아이템이 있는 상태라면</span>\n      <span class="token comment">// 그리고 최소터치시간(`MIN_TOUCH_DURATION`) 이 지나지 않았다면</span>\n      <span class="token comment">// -> 일단 아무 일도 하지 않는다. 이 터치가 선택 취소를 위한 터치일 가능성이 아직 있기 때문이다.</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>\n        touchRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>touched <span class="token operator">&amp;&amp;</span>\n        touchRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>touchStartTimestamp <span class="token operator">+</span> <span class="token constant">MIN_TOUCH_DURATION</span> <span class="token operator">></span> now\n      <span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token comment">// 선택된 아이템이 없거나</span>\n      <span class="token comment">// 혹은 최소터치시간(`MIN_TOUCH_DURATION`) 이 지났다면</span>\n      <span class="token comment">// -> 새로운 좌표에 기반해 선택 아이템을 찾기 시작한다.</span>\n      <span class="token comment">//    최소터치시간이 지났기 때문에 이 터치는 절대 선택 취소 터치가 아니다.</span>\n\n      <span class="token keyword">const</span> <span class="token punctuation">{</span> touches <span class="token punctuation">}</span> <span class="token operator">=</span> evt<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">;</span>\n      <span class="token keyword">const</span> selected <span class="token operator">=</span> <span class="token function">findItemsByCoord</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        series<span class="token operator">:</span> series<span class="token punctuation">,</span>\n        range<span class="token operator">:</span> paneBoundary<span class="token punctuation">.</span>xs<span class="token punctuation">,</span>\n        scale<span class="token operator">:</span> xScale<span class="token punctuation">,</span>\n        x<span class="token operator">:</span> touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>locationX<span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dr<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        dr<span class="token punctuation">.</span>touchedX <span class="token operator">=</span> touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>locationX<span class="token punctuation">;</span>\n        dr<span class="token punctuation">.</span>selected <span class="token operator">=</span> selected<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span>series<span class="token punctuation">,</span> paneBoundary<span class="token punctuation">]</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> onTouchEnd <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useCallback</span><span class="token generic class-name"><span class="token operator">&lt;</span>OnTouchEnd<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 선택된 아이템이 있는데</span>\n    <span class="token comment">// 최소터치시간(`MIN_TOUCH_DURATION`) 이 지나기 전에 이 `onTouchEnd` 가 호출되었다면</span>\n    <span class="token comment">// -> 선택 취소 터치이므로 아이템 선택을 취소한다.</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>\n      touchRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>touched <span class="token operator">&amp;&amp;</span>\n      touchRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>touchStartTimestamp <span class="token operator">+</span> <span class="token constant">MIN_TOUCH_DURATION</span> <span class="token operator">></span> now\n    <span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      touchRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>touched <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dr<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        dr<span class="token punctuation">.</span>touchedX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        dr<span class="token punctuation">.</span>selected <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      <span class="token comment">// 선택 취소 터치가 아니었다면 아이템이 선택되었음을 마킹해둔다.</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      touchRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>touched <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 현재 선택된 아이템과 터치 관련 리스너들을 반환한다.</span>\n  <span class="token keyword">return</span> <span class="token punctuation">[</span>state<span class="token punctuation">.</span>selected<span class="token punctuation">,</span> <span class="token punctuation">{</span> onTouchStart<span class="token punctuation">,</span> onTouchMove<span class="token punctuation">,</span> onTouchEnd <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> useSelectionByTouch<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"이제 아이템이 선택된 상태에서 차트를 짧게 터치하면 선택이 취소되는 것을 볼 수 있다."),p.createElement(s.h2,{id:"25-selectionoptions",style:{position:"relative"}},p.createElement(s.a,{href:"#25-selectionoptions","aria-label":"25 selectionoptions permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.5. ",p.createElement(s.code,null,"SelectionOptions")),p.createElement(s.p,null,"이제 마지막으로, 여태까지 구현해온 다른 기능들도 그랬듯이, 옵션 기능을 구현해보자."),p.createElement(s.h3,{id:"251-옵션-타입-추가",style:{position:"relative"}},p.createElement(s.a,{href:"#251-%EC%98%B5%EC%85%98-%ED%83%80%EC%9E%85-%EC%B6%94%EA%B0%80","aria-label":"251 옵션 타입 추가 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.5.1. 옵션 타입 추가"),p.createElement(s.p,null,"일단 옵션의 타입부터 추가하자."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/types.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">SelectionOptions</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  enabled<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>\n\n  lineColor<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n  lineWidth<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n\n  dot<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    enabled<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>\n\n    color<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>seriesColor<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    radius<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    borderColor<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>seriesColor<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    borderWidth<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  tooltip<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    enabled<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>\n\n    padding<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    paddingTop<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    paddingLeft<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    paddingRight<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    paddingBottom<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n\n    backgroundColor<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n    borderColor<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n    borderWidth<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n\n    titleFormatter<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>items<span class="token operator">:</span> SelectedItem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n    titleSize<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    titleFont<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n    titleWeight<span class="token operator">?</span><span class="token operator">:</span> FontWeight<span class="token punctuation">;</span>\n    titleColor<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n\n    itemCircleRadius<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    itemCircleColor<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>seriesColor<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    itemNameFormatter<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> SelectedItem<span class="token punctuation">,</span> series<span class="token operator">:</span> TimeSeries<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n    itemNameSize<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    itemNameFont<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n    itemNameWeight<span class="token operator">?</span><span class="token operator">:</span> FontWeight<span class="token punctuation">;</span>\n    itemNameColor<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>seriesColor<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    itemValueFormatter<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> SelectedItem<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n    itemValueSize<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    itemValueFont<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n    itemValueWeight<span class="token operator">?</span><span class="token operator">:</span> FontWeight<span class="token punctuation">;</span>\n    itemValueColor<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>seriesColor<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    titleHeight<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    itemHeight<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    itemCircleNameGap<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n    itemNameValueGap<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"다소 길다."),p.createElement(s.p,null,p.createElement(s.code,null,"dot")," 과 ",p.createElement(s.code,null,"tooltip")," 필드를 객체로 구성한 이유는 ",p.createElement(s.code,null,"<Selection />")," 이 ",p.createElement(s.code,null,"<Dots />"),", ",p.createElement(s.code,null,"<Tooltip />")," 에게 옵션을 전달할 때 편의성을 위해서다."),p.createElement(s.h3,{id:"252-linechart--로부터-옵션-전달",style:{position:"relative"}},p.createElement(s.a,{href:"#252-linechart--%EB%A1%9C%EB%B6%80%ED%84%B0-%EC%98%B5%EC%85%98-%EC%A0%84%EB%8B%AC","aria-label":"252 linechart  로부터 옵션 전달 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.5.2. ",p.createElement(s.code,null,"<LineChart />")," 로부터 옵션 전달"),p.createElement(s.p,null,p.createElement(s.code,null,"<LineChart />")," 가 해당 옵션을 prop 으로 받을 수 있게끔 하고, ",p.createElement(s.code,null,"<LineChart />")," 로부터 ",p.createElement(s.code,null,"<Selection />")," 까지 옵션값을 전달하자."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/index.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">type</span> <span class="token class-name">LineChartProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">  selectionOptions<span class="token operator">?</span><span class="token operator">:</span> SelectionOptions<span class="token punctuation">;</span></span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">LineChart</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">  selectionOptions<span class="token punctuation">,</span></span><span class="token punctuation">}</span><span class="token operator">:</span> LineChartProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>View <span class="token comment">/* ... */</span><span class="token operator">></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>chartWrapper<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>touchCallbacks<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Svg</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>height<span class="token punctuation">}</span></span> <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onLayout<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">          </span><span class="token punctuation">{</span>loaded <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LineChartBody</span></span>\n              <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">              <span class="token attr-name">selectionOptions</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selectionOptions<span class="token punctuation">}</span></span></span>            <span class="token punctuation">/></span></span>\n          <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Svg</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span>\n      <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/index.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">type</span> <span class="token class-name">LineChartBodyProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">  selectionOptions<span class="token operator">?</span><span class="token operator">:</span> SelectionOptions<span class="token punctuation">;</span></span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">LineChartBody</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n<span class="gatsby-highlight-code-line">  selectionOptions<span class="token punctuation">,</span></span><span class="token punctuation">}</span><span class="token operator">:</span> LineChartBodyProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      &lt;XAxis /* ... */ /></span>\n<span class="token plain-text">      &lt;YAxis /* ... */ /></span>\n<span class="token plain-text">      &lt;Lines /* ... */ /></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Selection</span></span>\n        <span class="token attr-name">xScale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>xScale<span class="token punctuation">}</span></span>\n        <span class="token attr-name">yScale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>yScale<span class="token punctuation">}</span></span>\n        <span class="token attr-name">paneBoundary</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paneBoundary<span class="token punctuation">}</span></span>\n        <span class="token attr-name">selected</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span></span>\n        <span class="token attr-name">colors</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>linesOptions<span class="token operator">?.</span>colors <span class="token operator">??</span> <span class="token constant">DEFAULT_COLORS</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">series</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>series<span class="token punctuation">}</span></span>\n<span class="gatsby-highlight-code-line">        <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>selectionOptions<span class="token punctuation">}</span></span></span>      <span class="token punctuation">/></span></span><span class="token plain-text"></span>\n<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> LineChartBody<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.h3,{id:"253-selection--수정",style:{position:"relative"}},p.createElement(s.a,{href:"#253-selection--%EC%88%98%EC%A0%95","aria-label":"253 selection  수정 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2.5.3. ",p.createElement(s.code,null,"<Selection />")," 수정"),p.createElement(s.p,null,"전달받은 옵션을 사용하도록 ",p.createElement(s.code,null,"<Selection />")," 과 ",p.createElement(s.code,null,"<Dots />"),", ",p.createElement(s.code,null,"<Tooltip />")," 을 수정하자."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/Selection/index.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line"><span class="token comment">// `SelectionOptions` 타입의 속성들을 모두 prop 으로 받을 수 있도록 지정해주자.</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">type</span> <span class="token class-name">SelectionProps</span> <span class="token operator">=</span> SelectionOptions <span class="token operator">&amp;</span> <span class="token punctuation">{</span></span>  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">Selection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  xScale<span class="token punctuation">,</span>\n  yScale<span class="token punctuation">,</span>\n  paneBoundary<span class="token punctuation">,</span>\n  selected<span class="token punctuation">,</span>\n  colors<span class="token punctuation">,</span>\n  series<span class="token punctuation">,</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 이 아래 값들이 `SelectionOptions` 값들</span></span>\n<span class="gatsby-highlight-code-line">  enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  lineColor <span class="token operator">=</span> <span class="token string">"gray"</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  lineWidth <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  dot<span class="token operator">:</span> dotOptions<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  tooltip<span class="token operator">:</span> tooltipOptions<span class="token punctuation">,</span></span><span class="token punctuation">}</span><span class="token operator">:</span> SelectionProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>enabled<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="gatsby-highlight-code-line"><span class="token plain-text">        </span><span class="token punctuation">{</span>lineWidth <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Line</span></span>\n            <span class="token attr-name">x1</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span></span>\n            <span class="token attr-name">x2</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span></span>\n            <span class="token attr-name">y1</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paneBoundary<span class="token punctuation">.</span>y1<span class="token punctuation">}</span></span>\n            <span class="token attr-name">y2</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paneBoundary<span class="token punctuation">.</span>y2<span class="token punctuation">}</span></span>\n<span class="gatsby-highlight-code-line">            <span class="token attr-name">stroke</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>lineColor<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">            <span class="token attr-name">strokeWidth</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>lineWidth<span class="token punctuation">}</span></span></span>          <span class="token punctuation">/></span></span>\n        <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Dots</span></span>\n          <span class="token attr-name">items</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span></span>\n          <span class="token attr-name">xScale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>xScale<span class="token punctuation">}</span></span>\n          <span class="token attr-name">yScale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>yScale<span class="token punctuation">}</span></span>\n          <span class="token attr-name">colors</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>colors<span class="token punctuation">}</span></span>\n<span class="gatsby-highlight-code-line">          <span class="token comment">// `&lt;Dots />` 를 위한 옵션도 전달해주자.</span></span><span class="gatsby-highlight-code-line">          <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>dotOptions<span class="token punctuation">}</span></span></span>        <span class="token punctuation">/></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tooltip</span></span>\n        <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>tooltipX<span class="token punctuation">}</span></span>\n        <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paneBoundary<span class="token punctuation">.</span>y2<span class="token punctuation">}</span></span>\n        <span class="token attr-name">items</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span></span>\n        <span class="token attr-name">series</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>series<span class="token punctuation">}</span></span>\n        <span class="token attr-name">colors</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>colors<span class="token punctuation">}</span></span>\n        <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onTooltipLayout<span class="token punctuation">}</span></span>\n<span class="gatsby-highlight-code-line">        <span class="token comment">// `&lt;Tooltip />` 를 위한 옵션도 전달해주자.</span></span><span class="gatsby-highlight-code-line">        <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>tooltipOptions<span class="token punctuation">}</span></span></span>      <span class="token punctuation">/></span></span><span class="token plain-text"></span>\n<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> Selection<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/Selection/Dots.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line"><span class="token comment">// `SelectionOptions[\'dots\']` 타입의 속성들을 모두 prop 으로 받을 수 있도록 지정해주자.</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">type</span> <span class="token class-name">DotsProps</span> <span class="token operator">=</span> SelectionOptions<span class="token punctuation">[</span><span class="token string">"dot"</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span></span>  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">Dots</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  items<span class="token punctuation">,</span>\n  xScale<span class="token punctuation">,</span>\n  yScale<span class="token punctuation">,</span>\n  colors<span class="token punctuation">,</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 이 아래 값들이 `SelectionOptions[\'dots\']` 값들</span></span>\n<span class="gatsby-highlight-code-line">  enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  <span class="token function-variable function">color</span> <span class="token operator">=</span> <span class="token punctuation">(</span>seriesColor<span class="token punctuation">)</span> <span class="token operator">=></span> seriesColor<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  radius <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  <span class="token function-variable function">borderColor</span> <span class="token operator">=</span> <span class="token punctuation">(</span>seriesColor<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">getColorWithAlpha</span><span class="token punctuation">(</span>seriesColor<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  borderWidth <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span></span><span class="token punctuation">}</span><span class="token operator">:</span> DotsProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>enabled<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Circle</span></span>\n          <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>seriesIndex<span class="token punctuation">}</span></span>\n          <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">xScale</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n          <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">yScale</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n<span class="gatsby-highlight-code-line">          <span class="token attr-name">r</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>radius<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">fill</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">            <span class="token keyword">typeof</span> color <span class="token operator">===</span> <span class="token string">"function"</span></span><span class="gatsby-highlight-code-line">              <span class="token operator">?</span> <span class="token function">color</span><span class="token punctuation">(</span>colors<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex <span class="token operator">%</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">              <span class="token operator">:</span> color</span>          <span class="token punctuation">}</span></span>\n<span class="gatsby-highlight-code-line">          <span class="token attr-name">stroke</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">            <span class="token keyword">typeof</span> borderColor <span class="token operator">===</span> <span class="token string">"function"</span></span><span class="gatsby-highlight-code-line">              <span class="token operator">?</span> <span class="token function">borderColor</span><span class="token punctuation">(</span>colors<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex <span class="token operator">%</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">              <span class="token operator">:</span> borderColor</span><span class="gatsby-highlight-code-line">          <span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">strokeWidth</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>borderWidth<span class="token punctuation">}</span></span></span>        <span class="token punctuation">/></span></span>\n      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> Dots<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{className:"codeblock-title"},"comps/LineChart/LineChartBody/Selection/Tooltip.ts"),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line"><span class="token comment">// `SelectionOptions[\'tooltip\']` 타입의 속성들을 모두 prop 으로 받을 수 있도록 지정해주자.</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">TooltipProps</span> <span class="token operator">=</span> SelectionOptions<span class="token punctuation">[</span><span class="token string">"tooltip"</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span></span>  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">Tooltip</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  items<span class="token punctuation">,</span>\n  series<span class="token punctuation">,</span>\n  colors<span class="token punctuation">,</span>\n  x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>\n  y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>\n  onLayout<span class="token operator">:</span> _onLayout<span class="token punctuation">,</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 이 아래 값들이 `SelectionOptions[\'tooltip\']` 값들</span></span>\n<span class="gatsby-highlight-code-line">  enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  padding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  paddingTop<span class="token operator">:</span> _paddingTop<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  paddingLeft<span class="token operator">:</span> _paddingLeft<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  paddingRight<span class="token operator">:</span> _paddingRight<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  paddingBottom<span class="token operator">:</span> _paddingBottom<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  backgroundColor <span class="token operator">=</span> <span class="token string">"white"</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  borderColor <span class="token operator">=</span> <span class="token string">"darkgray"</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  borderWidth<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  <span class="token function-variable function">titleFormatter</span> <span class="token operator">=</span> <span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dateFormat</span><span class="token punctuation">(</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  titleSize<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  titleFont<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  titleWeight<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  titleColor<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemCircleRadius <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  <span class="token function-variable function">itemCircleColor</span> <span class="token operator">=</span> <span class="token punctuation">(</span>seriesColor<span class="token punctuation">)</span> <span class="token operator">=></span> seriesColor<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  <span class="token function-variable function">itemNameFormatter</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> series<span class="token punctuation">)</span> <span class="token operator">=></span></span><span class="gatsby-highlight-code-line">    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>series<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">??</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">시리즈 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>seriesIndex<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemNameSize<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemNameFont<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemNameWeight<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemNameColor<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  <span class="token function-variable function">itemValueFormatter</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemValueSize<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemValueFont<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemValueWeight <span class="token operator">=</span> <span class="token string">"600"</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemValueColor<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  titleHeight <span class="token operator">=</span> <span class="token number">14</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemHeight <span class="token operator">=</span> <span class="token number">14</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemCircleNameGap <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  itemNameValueGap <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span></span><span class="token punctuation">}</span><span class="token operator">:</span> TooltipProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> paddingTop <span class="token operator">=</span> _paddingTop <span class="token operator">??</span> padding<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> paddingLeft <span class="token operator">=</span> _paddingLeft <span class="token operator">??</span> padding<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> paddingRight <span class="token operator">=</span> _paddingRight <span class="token operator">??</span> padding<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> paddingBottom <span class="token operator">=</span> _paddingBottom <span class="token operator">??</span> padding<span class="token punctuation">;</span></span>\n  <span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>enabled<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span> <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span></span> <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>y<span class="token punctuation">}</span></span> <span class="token attr-name">opacity</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>loaded <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token punctuation">{</span>loaded <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Rect</span></span>\n<span class="gatsby-highlight-code-line">          <span class="token attr-name">width</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>width <span class="token operator">+</span> paddingLeft <span class="token operator">+</span> paddingRight<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>height <span class="token operator">+</span> paddingTop <span class="token operator">+</span> paddingBottom<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">fill</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>backgroundColor<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">stroke</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>borderColor<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">          <span class="token attr-name">strokeWidth</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>borderWidth<span class="token punctuation">}</span></span></span>          <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onLayout<span class="token punctuation">}</span></span>\n        <span class="token punctuation">/></span></span>\n      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span> <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paddingLeft<span class="token punctuation">}</span></span> <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>paddingTop<span class="token punctuation">}</span></span> <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onContentLayout<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span>\n            <span class="token attr-name">alignmentBaseline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hanging<span class="token punctuation">"</span></span>\n<span class="gatsby-highlight-code-line">            <span class="token attr-name">fontSize</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>titleSize<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">            <span class="token attr-name">fontFamily</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>titleFont<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">            <span class="token attr-name">fontWeight</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>titleWeight<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">            <span class="token attr-name">fill</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>titleColor<span class="token punctuation">}</span></span></span>          <span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="gatsby-highlight-code-line"><span class="token plain-text">            </span><span class="token punctuation">{</span><span class="token function">titleFormatter</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span></span><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n<span class="gatsby-highlight-code-line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">G</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span> <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>titleHeight <span class="token operator">+</span> i <span class="token operator">*</span> itemHeight<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Circle</span></span>\n              <span class="token attr-name">x</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span></span>\n              <span class="token attr-name">y</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">}</span></span>\n<span class="gatsby-highlight-code-line">              <span class="token attr-name">r</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>itemCircleRadius<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">              <span class="token attr-name">fill</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">                <span class="token keyword">typeof</span> itemCircleColor <span class="token operator">===</span> <span class="token string">"function"</span></span><span class="gatsby-highlight-code-line">                  <span class="token operator">?</span> <span class="token function">itemCircleColor</span><span class="token punctuation">(</span>colors<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex <span class="token operator">%</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">                  <span class="token operator">:</span> itemCircleColor</span><span class="gatsby-highlight-code-line">              <span class="token punctuation">}</span></span></span>            <span class="token punctuation">/></span></span><span class="token plain-text"></span>\n<span class="token plain-text">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span>\n<span class="gatsby-highlight-code-line">              <span class="token attr-name">dx</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>itemCircleRadius <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> itemCircleNameGap<span class="token punctuation">}</span></span></span>              <span class="token attr-name">alignmentBaseline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hanging<span class="token punctuation">"</span></span>\n            <span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TSpan</span></span>\n<span class="gatsby-highlight-code-line">                <span class="token attr-name">fill</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">                  <span class="token keyword">typeof</span> itemNameColor <span class="token operator">===</span> <span class="token string">"function"</span></span><span class="gatsby-highlight-code-line">                    <span class="token operator">?</span> <span class="token function">itemNameColor</span><span class="token punctuation">(</span>colors<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex <span class="token operator">%</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">                    <span class="token operator">:</span> itemNameColor</span><span class="gatsby-highlight-code-line">                <span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">                <span class="token attr-name">fontSize</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>itemNameSize<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">                <span class="token attr-name">fontFamily</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>itemNameFont<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">                <span class="token attr-name">fontWeight</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>itemNameWeight<span class="token punctuation">}</span></span></span>              <span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="gatsby-highlight-code-line"><span class="token plain-text">                </span><span class="token punctuation">{</span><span class="token function">itemNameFormatter</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> series<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span></span><span class="token plain-text">              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TSpan</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TSpan</span></span>\n<span class="gatsby-highlight-code-line">                <span class="token attr-name">dx</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>itemNameValueGap<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">                <span class="token attr-name">fill</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">                  <span class="token keyword">typeof</span> itemValueColor <span class="token operator">===</span> <span class="token string">"function"</span></span><span class="gatsby-highlight-code-line">                    <span class="token operator">?</span> <span class="token function">itemValueColor</span><span class="token punctuation">(</span>colors<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex <span class="token operator">%</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">                    <span class="token operator">:</span> itemValueColor</span><span class="gatsby-highlight-code-line">                <span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">                <span class="token attr-name">fontSize</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>itemValueSize<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">                <span class="token attr-name">fontFamily</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>itemValueFont<span class="token punctuation">}</span></span></span><span class="gatsby-highlight-code-line">                <span class="token attr-name">fontWeight</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>itemValueWeight<span class="token punctuation">}</span></span></span>              <span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="gatsby-highlight-code-line"><span class="token plain-text">                </span><span class="token punctuation">{</span><span class="token function">itemValueFormatter</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span></span><span class="token plain-text">              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TSpan</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span>\n        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">G</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> Tooltip<span class="token punctuation">;</span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.p,null,"이제 하드코딩은 거의 다 없어졌고, 옵션 값을 사용해 선택된 아이템의 세로선, 점, 툴팁의 스타일을 지정할 수 있게 되었다."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LineChart</span></span>\n  <span class="token attr-name">series</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>dummySeries<span class="token punctuation">}</span></span>\n  <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span>\n  <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">200</span><span class="token punctuation">}</span></span>\n  <span class="token attr-name">xAxisOptions</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> showGridLines<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n  <span class="token attr-name">selectionOptions</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n    tooltip<span class="token operator">:</span> <span class="token punctuation">{</span>\n      enabled<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n<span class="token punctuation">/></span></span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/blog/static/0dd27990a857444010a39a42e12af534/47311/selection-3-1.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 61.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHYsLGEh//EABgQAAIDAAAAAAAAAAAAAAAAAAABECEx/9oACAEBAAEFAkXDFp//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAEBAQEBAQAAAAAAAAAAAAABABEhQXH/2gAIAQEAAT8hbj72+C7DBbrMAX//2gAMAwEAAgADAAAAEAPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAAIBBQEAAAAAAAAAAAAAAQARMSFBUXGxYf/aAAgBAQABPxAAAq3su5h7YO/PwhhrfHEaadEv2CVnuf/Z\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="selection 3 1"\n        title=""\n        src="/blog/static/0dd27990a857444010a39a42e12af534/b4294/selection-3-1.jpg"\n        srcset="/blog/static/0dd27990a857444010a39a42e12af534/75985/selection-3-1.jpg 150w,\n/blog/static/0dd27990a857444010a39a42e12af534/f93b5/selection-3-1.jpg 300w,\n/blog/static/0dd27990a857444010a39a42e12af534/b4294/selection-3-1.jpg 600w,\n/blog/static/0dd27990a857444010a39a42e12af534/8e1fc/selection-3-1.jpg 900w,\n/blog/static/0dd27990a857444010a39a42e12af534/47311/selection-3-1.jpg 1080w"\n        sizes="(max-width: 600px) 100vw, 600px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LineChart</span></span>\n  <span class="token attr-name">series</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>dummySeries<span class="token punctuation">}</span></span>\n  <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span>\n  <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">200</span><span class="token punctuation">}</span></span>\n  <span class="token attr-name">legendOptions</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> enabled<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n  <span class="token attr-name">selectionOptions</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n    lineWidth<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    dot<span class="token operator">:</span> <span class="token punctuation">{</span>\n      radius<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>\n      borderWidth<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    tooltip<span class="token operator">:</span> <span class="token punctuation">{</span>\n      padding<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>\n      backgroundColor<span class="token operator">:</span> <span class="token string">"rgba(255, 255, 255, 0.9)"</span><span class="token punctuation">,</span>\n      borderWidth<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>\n      <span class="token function-variable function">itemNameColor</span><span class="token operator">:</span> <span class="token punctuation">(</span>seriesColor<span class="token punctuation">)</span> <span class="token operator">=></span> seriesColor<span class="token punctuation">,</span>\n      <span class="token function-variable function">itemNameFormatter</span><span class="token operator">:</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> series<span class="token punctuation">)</span> <span class="token operator">=></span> series<span class="token punctuation">[</span>item<span class="token punctuation">.</span>seriesIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">??</span> <span class="token string">""</span><span class="token punctuation">,</span>\n      itemNameSize<span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>\n      itemNameWeight<span class="token operator">:</span> <span class="token string">"100"</span><span class="token punctuation">,</span>\n      titleHeight<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>\n      titleSize<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>\n      <span class="token function-variable function">itemValueColor</span><span class="token operator">:</span> <span class="token punctuation">(</span>seriesColor<span class="token punctuation">)</span> <span class="token operator">=></span> seriesColor<span class="token punctuation">,</span>\n      <span class="token function-variable function">itemValueFormatter</span><span class="token operator">:</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=></span> item<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      itemValueWeight<span class="token operator">:</span> <span class="token string">"900"</span><span class="token punctuation">,</span>\n      itemValueSize<span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>\n      itemHeight<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>\n      itemCircleNameGap<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n      itemNameValueGap<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n<span class="token punctuation">/></span></span></code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/blog/static/4e01eb83fe45a37d3f1278b76842ad16/47311/selection-3-2.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 48%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAQACBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAewgbiP/xAAYEAACAwAAAAAAAAAAAAAAAAAAAQIgMf/aAAgBAQABBQKOUR//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEQIUEx/9oACAEBAAE/IU11cV6EuPuOp//aAAwDAQACAAMAAAAQY8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAwEBAQEAAAAAAAAAAAABABEhMXFR0f/aAAgBAQABPxCkiVbsDoA029l2k0S+TDDC+HpLfrz9mz1P/9k=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="selection 3 2"\n        title=""\n        src="/blog/static/4e01eb83fe45a37d3f1278b76842ad16/b4294/selection-3-2.jpg"\n        srcset="/blog/static/4e01eb83fe45a37d3f1278b76842ad16/75985/selection-3-2.jpg 150w,\n/blog/static/4e01eb83fe45a37d3f1278b76842ad16/f93b5/selection-3-2.jpg 300w,\n/blog/static/4e01eb83fe45a37d3f1278b76842ad16/b4294/selection-3-2.jpg 600w,\n/blog/static/4e01eb83fe45a37d3f1278b76842ad16/8e1fc/selection-3-2.jpg 900w,\n/blog/static/4e01eb83fe45a37d3f1278b76842ad16/47311/selection-3-2.jpg 1080w"\n        sizes="(max-width: 600px) 100vw, 600px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),p.createElement(s.h1,{id:"3-결과",style:{position:"relative"}},p.createElement(s.a,{href:"#3-%EA%B2%B0%EA%B3%BC","aria-label":"3 결과 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"3. 결과"),p.createElement(s.p,null,"이제 차트에서 터치로 아이템을 선택할 수 있게 되었다."),p.createElement(s.h2,{id:"31-이슈",style:{position:"relative"}},p.createElement(s.a,{href:"#31-%EC%9D%B4%EC%8A%88","aria-label":"31 이슈 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"3.1. 이슈"),p.createElement(s.p,null,"기능 자체는 잘 동작하지만 이슈가 몇 개 남아있다."),p.createElement(s.ul,null,"\n",p.createElement(s.li,null,"툴팁 초기화가 살짝 느리다. 컨텐츠 영역의 크기를 ",p.createElement(s.code,null,"onLayout")," 콜백으로 측정하고 그 뒤에 배경 및 테두리까지 그린 뒤에야 보여주기 때문이다."),"\n",p.createElement(s.li,null,"2.4. 에서 간접적으로 언급했지만, 선택을 취소하는 UX 가 마음에 들지 않는다. 그런데 다른 대안도 썩 마음에 들지는 않아서 문제다."),"\n"),p.createElement(s.h2,{id:"32-상세-코드-전문",style:{position:"relative"}},p.createElement(s.a,{href:"#32-%EC%83%81%EC%84%B8-%EC%BD%94%EB%93%9C-%EC%A0%84%EB%AC%B8","aria-label":"32 상세 코드 전문 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"3.2. 상세 코드 전문"),p.createElement(s.p,null,"본문에 삽입된 코드들은 생략된 부분들이 있으므로 코드 전문을 보고 싶다면 아래 링크를 참고하자."),p.createElement(s.ul,null,"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"https://github.com/ricale/D3ChartExamples/tree/main/src/screens/C04SelectableLineChartScreen"},"C04SelectableLineChartScreen")),"\n"),p.createElement(s.h2,{id:"33-실행해보기",style:{position:"relative"}},p.createElement(s.a,{href:"#33-%EC%8B%A4%ED%96%89%ED%95%B4%EB%B3%B4%EA%B8%B0","aria-label":"33 실행해보기 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"3.3. 실행해보기"),p.createElement(s.p,null,"구현 결과를 실기기 혹은 에뮬레이터에서 직접 확인하고 싶다면 ",p.createElement(s.a,{href:"https://github.com/ricale/D3ChartExamples"},"https://github.com/ricale/D3ChartExamples")," 에서 프로젝트를 받아서 실행해보면 된다."),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token comment"># 프로젝트 코드 다운로드</span>\n<span class="token function">git</span> clone https://github.com/ricale/D3ChartExamples.git\n<span class="token builtin class-name">cd</span> ./D3ChartExamples</code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token comment"># 안드로이드 실행</span>\n<span class="token function">yarn</span>\n<span class="token function">yarn</span> android</code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.div,{className:"codeblock-container"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token comment"># iOS 실행</span>\n<span class="token function">yarn</span>\n<span class="token builtin class-name">cd</span> ./ios <span class="token operator">&amp;&amp;</span> pod <span class="token function">install</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/\n<span class="token function">yarn</span> ios</code></pre></div>'}}),p.createElement(s.button,{className:"codeblock-copy-button"},"COPY")),p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/blog/static/f288e06f8efb35211ecae6678b95689b/47311/screenshot.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 211.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAqABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAEEBgID/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABt9W5Ki4OUiUjynEjbsOP/8QAHBAAAQQDAQAAAAAAAAAAAAAAAAEDEBQRICFB/9oACAEBAAEFAqjRUaKjGvsdhFMoZTT/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AV//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AV//xAAcEAACAgIDAAAAAAAAAAAAAAAAEAExITIgM6H/2gAIAQEABj8C0g0g6/Vay8O4LL4f/8QAHxAAAgEEAgMAAAAAAAAAAAAAAAERMVFhkRAhQYGh/9oACAEBAAE/IZab2XfqY2wpUqnZ7CE1DYUS6oJ4Iq4CbOglcQpUXdzF2YOzwW4//9oADAMBAAIAAwAAABCDADDTz//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QX//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QX//EACIQAQACAgEDBQEAAAAAAAAAAAEAESExUUFxwRBhgZHw8f/aAAgBAQABPxBvrAaP7wZwuyvM/YeYbB2PMouYxhX7ijC7Sw3UJtPCrbg1ihxqFMwW6c31nQgvbErIv2g2wG0MLkSs3XmHTf4w37kd9h6f/9k=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="screenshot"\n        title=""\n        src="/blog/static/f288e06f8efb35211ecae6678b95689b/b4294/screenshot.jpg"\n        srcset="/blog/static/f288e06f8efb35211ecae6678b95689b/75985/screenshot.jpg 150w,\n/blog/static/f288e06f8efb35211ecae6678b95689b/f93b5/screenshot.jpg 300w,\n/blog/static/f288e06f8efb35211ecae6678b95689b/b4294/screenshot.jpg 600w,\n/blog/static/f288e06f8efb35211ecae6678b95689b/8e1fc/screenshot.jpg 900w,\n/blog/static/f288e06f8efb35211ecae6678b95689b/47311/screenshot.jpg 1080w"\n        sizes="(max-width: 600px) 100vw, 600px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),p.createElement(s.h1,{id:"4-다음",style:{position:"relative"}},p.createElement(s.a,{href:"#4-%EB%8B%A4%EC%9D%8C","aria-label":"4 다음 permalink",className:"anchor before"},p.createElement(s.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"4. 다음"),p.createElement(s.p,null,"다음에 구현 및 정리할 예정인 작업들은 아래와 같다."),p.createElement(s.ol,null,"\n",p.createElement(s.li,null,"라인차트 애니메이션 기능 구현 (초기화 시, 값 변경 시 등)"),"\n",p.createElement(s.li,null,"컬럼차트 구현 (상세 계획 미정)"),"\n",p.createElement(s.li,null,"파이차트 구현 (상세 계획 미정)"),"\n")),"\n",p.createElement(s.div,{className:"toc"},p.createElement(s.p,null,"목차"),p.createElement(s.ul,null,"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#1-%EA%B0%9C%EC%9A%94"},"1. 개요")),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#2-%EA%B5%AC%ED%98%84"},"2. 구현"),"\n",p.createElement(s.ul,null,"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#21-%ED%84%B0%EC%B9%98%EB%90%9C-%EC%A7%80%EC%A0%90%EC%97%90%EC%84%9C-%EC%A0%9C%EC%9D%BC-%EA%B0%80%EA%B9%8C%EC%9A%B4-%EC%95%84%EC%9D%B4%ED%85%9C-%EC%B0%BE%EA%B8%B0"},"2.1. 터치된 지점에서 제일 가까운 아이템 찾기"),"\n",p.createElement(s.ul,null,"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#211-%ED%84%B0%EC%A7%80%EB%90%9C-%EC%A7%80%EC%A0%90-%EC%A2%8C%ED%91%9C%EA%B0%92-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0"},"2.1.1. 터지된 지점 좌표값 가져오기")),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#212-%EC%A2%8C%ED%91%9C%EA%B0%92%EC%97%90%EC%84%9C-%EC%A0%9C%EC%9D%BC-%EA%B0%80%EA%B9%8C%EC%9A%B4-%EC%95%84%EC%9D%B4%ED%85%9C-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0"},"2.1.2. 좌표값에서 제일 가까운 아이템 가져오기")),"\n"),"\n"),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#22-%EC%84%A0%ED%83%9D%EB%90%9C-%EC%95%84%EC%9D%B4%ED%85%9C%EB%93%A4%EC%9D%84-%ED%91%9C%EC%8B%9C%ED%95%98%EB%8A%94-%EC%84%B8%EB%A1%9C%EC%84%A0%EA%B3%BC-%EC%A0%90-%EA%B5%AC%ED%98%84"},"2.2. 선택된 아이템들을 표시하는 세로선과 점 구현")),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#23-%EC%84%A0%ED%83%9D%EB%90%9C-%EC%95%84%EC%9D%B4%ED%85%9C%EB%93%A4%EC%9D%98-%EC%A0%95%EB%B3%B4%EB%A5%BC-%ED%91%9C%EC%8B%9C%ED%95%98%EB%8A%94-%ED%88%B4%ED%8C%81-%EA%B5%AC%ED%98%84"},"2.3. 선택된 아이템들의 정보를 표시하는 툴팁 구현"),"\n",p.createElement(s.ul,null,"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#231-selection--%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EB%B6%84%EB%A6%AC"},"2.3.1. ",p.createElement(s.code,null,"<Selection />")," 컴포넌트 분리")),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#232-tooltip--%EA%B5%AC%ED%98%84"},"2.3.2. ",p.createElement(s.code,null,"<Tooltip />")," 구현")),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#233-%ED%88%B4%ED%8C%81%EC%9D%98-%EC%9C%84%EC%B9%98%EB%A5%BC-%EB%8F%99%EC%A0%81%EC%9C%BC%EB%A1%9C-%EB%B3%80%EA%B2%BD"},"2.3.3. 툴팁의 위치를 동적으로 변경")),"\n"),"\n"),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#24-%EC%84%A0%ED%83%9D-%EC%B7%A8%EC%86%8C%ED%95%98%EA%B8%B0"},"2.4. 선택 취소하기"),"\n",p.createElement(s.ul,null,"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#241-ontouchstart-ontouchmove-ontouchend-%EA%B0%81%EA%B0%81-%EA%B5%AC%ED%98%84"},"2.4.1. ",p.createElement(s.code,null,"onTouchStart"),", ",p.createElement(s.code,null,"onTouchMove"),", ",p.createElement(s.code,null,"onTouchEnd")," 각각 구현")),"\n"),"\n"),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#25-selectionoptions"},"2.5. ",p.createElement(s.code,null,"SelectionOptions")),"\n",p.createElement(s.ul,null,"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#251-%EC%98%B5%EC%85%98-%ED%83%80%EC%9E%85-%EC%B6%94%EA%B0%80"},"2.5.1. 옵션 타입 추가")),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#252-linechart--%EB%A1%9C%EB%B6%80%ED%84%B0-%EC%98%B5%EC%85%98-%EC%A0%84%EB%8B%AC"},"2.5.2. ",p.createElement(s.code,null,"<LineChart />")," 로부터 옵션 전달")),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#253-selection--%EC%88%98%EC%A0%95"},"2.5.3. ",p.createElement(s.code,null,"<Selection />")," 수정")),"\n"),"\n"),"\n"),"\n"),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#3-%EA%B2%B0%EA%B3%BC"},"3. 결과"),"\n",p.createElement(s.ul,null,"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#31-%EC%9D%B4%EC%8A%88"},"3.1. 이슈")),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#32-%EC%83%81%EC%84%B8-%EC%BD%94%EB%93%9C-%EC%A0%84%EB%AC%B8"},"3.2. 상세 코드 전문")),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#33-%EC%8B%A4%ED%96%89%ED%95%B4%EB%B3%B4%EA%B8%B0"},"3.3. 실행해보기")),"\n"),"\n"),"\n",p.createElement(s.li,null,p.createElement(s.a,{href:"#4-%EB%8B%A4%EC%9D%8C"},"4. 다음")),"\n")))}s.Z=function(n){void 0===n&&(n={});const{wrapper:s}=Object.assign({},(0,t.ah)(),n.components);return s?p.createElement(s,n,p.createElement(e,n)):e(n)}}}]);
//# sourceMappingURL=3d0a5946-fc9d8b31a3a40226f2a9.js.map